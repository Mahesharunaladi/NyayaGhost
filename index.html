<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nyaya Mitra - рдиреНрдпрд╛рдп рдорд┐рддреНрд░</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="manifest" href="manifest.json">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: #FFF9F5;
            color: #2E3440;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        header {
            background: white;
            padding: 1rem 2rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            text-align: center;
        }

        header h1 {
            font-size: 1.5rem;
            color: #FF8C42;
        }

        .container {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
        }

        .main-title {
            text-align: center;
            margin-bottom: 3rem;
        }

        .main-title .emoji {
            font-size: 5rem;
            margin-bottom: 1rem;
        }

        .main-title h2 {
            font-size: 2.5rem;
            color: #FF8C42;
            margin-bottom: 0.5rem;
        }

        .main-title p {
            font-size: 1.5rem;
            color: #2E3440;
            font-weight: 600;
        }

        .language-section {
            margin-bottom: 3rem;
            text-align: center;
        }

        .language-section h3 {
            font-size: 1.25rem;
            margin-bottom: 1.5rem;
            color: #2E3440;
        }

        .language-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            max-width: 800px;
            margin: 0 auto;
        }

        .lang-button {
            padding: 1.5rem;
            background: white;
            border: 2px solid #E5E7EB;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
        }

        .lang-button:hover {
            border-color: #FF8C42;
            transform: translateY(-3px);
            box-shadow: 0 4px 12px rgba(255, 140, 66, 0.2);
        }

        .lang-button.active {
            border-color: #FF8C42;
            background: #FFF4ED;
        }

        .lang-button .flag {
            font-size: 2rem;
        }

        .lang-button .text {
            font-size: 1.25rem;
            font-weight: 600;
        }

        .mic-section {
            margin: 3rem 0;
            text-align: center;
        }

        #mic-button {
            width: 200px;
            height: 200px;
            font-size: 6rem;
            border-radius: 50%;
            background: linear-gradient(135deg, #FF8C42, #ff6b35);
            color: white;
            border: none;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(255, 140, 66, 0.3);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto;
        }

        #mic-button:hover {
            transform: scale(1.1);
            box-shadow: 0 15px 40px rgba(255, 140, 66, 0.5);
        }

        #mic-button:active {
            transform: scale(0.95);
        }

        .instructions {
            margin-top: 2rem;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .instructions p {
            margin: 0.5rem 0;
        }

        .instruction-main {
            font-size: 1.5rem;
            font-weight: 700;
            color: #FF8C42;
            margin-bottom: 1rem;
        }

        .instruction-sub {
            font-size: 1.25rem;
            color: #6B7280;
            line-height: 1.6;
        }

        .examples {
            max-width: 900px;
            margin: 3rem auto 0;
        }

        .examples h2 {
            font-size: 1.75rem;
            font-weight: 700;
            text-align: center;
            margin-bottom: 2rem;
            color: #2E3440;
        }

        .example-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
        }

        .example-card {
            background: white;
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            text-align: center;
            transition: all 0.3s ease;
            border: 2px solid #E5E7EB;
        }

        .example-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(255, 140, 66, 0.2);
            border-color: #FF8C42;
        }

        .example-card .icon {
            font-size: 3rem;
            margin-bottom: 0.5rem;
        }

        .example-card .title {
            font-weight: 600;
            color: #2E3440;
            margin-bottom: 0.5rem;
        }

        .example-card .subtitle {
            font-size: 0.9rem;
            color: #6B7280;
            line-height: 1.4;
        }

        #voice-output {
            margin-top: 2rem;
            padding: 2rem;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            min-height: 100px;
            display: none;
        }

        #voice-output.active {
            display: block;
        }

        @media (max-width: 768px) {
            .main-title h2 {
                font-size: 2rem;
            }

            #mic-button {
                width: 150px;
                height: 150px;
                font-size: 4rem;
            }

            .language-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <header>
        <h1 id="header-title">ЁЯзб Nyaya Mitra - рдиреНрдпрд╛рдп рдорд┐рддреНрд░</h1>
    </header>

    <div class="container">
        <div class="main-title">
            <div class="emoji">ЁЯСитАНтЪЦя╕П</div>
            <h2 id="main-heading">рдиреНрдпрд╛рдп рдорд┐рддреНрд░</h2>
            <p id="main-subtitle">рдЖрдкрдХрд╛ рдХрд╛рдиреВрдиреА рджреЛрд╕реНрдд</p>
        </div>

        <div class="language-section">
            <h3 id="lang-heading">ЁЯЧгя╕П рдЕрдкрдиреА рднрд╛рд╖рд╛ рдЪреБрдиреЗрдВ (Choose Your Language):</h3>
            <div class="language-grid">
                <button class="lang-button active" data-lang="hindi">
                    <span class="flag">ЁЯЗоЁЯЗ│</span>
                    <span class="text">рд╣рд┐рдВрджреА</span>
                </button>
                <button class="lang-button" data-lang="english">
                    <span class="flag">ЁЯЗмЁЯЗз</span>
                    <span class="text">English</span>
                </button>
                <button class="lang-button" data-lang="kannada">
                    <span class="flag">ЁЯМ╛</span>
                    <span class="text">р▓Хр▓ир│Нр▓ир▓б</span>
                </button>
                <button class="lang-button" data-lang="bhojpuri">
                    <span class="flag">ЁЯМ╛</span>
                    <span class="text">рднреЛрдЬрдкреБрд░реА</span>
                </button>
                <button class="lang-button" data-lang="tamil">
                    <span class="flag">ЁЯУЬ</span>
                    <span class="text">родрооро┐ро┤рпН</span>
                </button>
                <button class="lang-button" data-lang="telugu">
                    <span class="flag">ЁЯУЦ</span>
                    <span class="text">р░др▒Жр░▓р▒Бр░Чр▒Б</span>
                </button>
            </div>
        </div>

        <div class="mic-section">
            <button id="mic-button">ЁЯОд</button>
            <div class="instructions" id="instructions">
                <p class="instruction-main">ЁЯСЖ рдмрдЯрди рджрдмрд╛рдПрдВ рдФрд░ рдмреЛрд▓реЗрдВ</p>
                <p class="instruction-sub">Press the button and speak<br>р▓Чр│Бр▓Вр▓бр▓┐р▓пр▓ир│Нр▓ир│Б р▓Тр▓др│Нр▓др▓┐ р▓ор▓др│Нр▓др│Б р▓ор▓╛р▓др▓ир▓╛р▓бр▓┐</p>
            </div>
        </div>

        <div id="voice-output"></div>

        <div class="examples">
            <h2 id="examples-heading">ЁЯТм рдЖрдк рдХреНрдпрд╛ рдмреЛрд▓ рд╕рдХрддреЗ рд╣реИрдВ? (What can you say?)</h2>
            <div class="example-grid" id="example-grid">
                <!-- Examples will be dynamically loaded -->
            </div>
        </div>
    </div>

    <script>
        console.log('ЁЯЪА Nyaya Mitra - Multilingual Version Loaded');

        let currentLanguage = 'hindi';
        let recognition;

        const languageMap = {
            'hindi': 'hi-IN',
            'english': 'en-US',
            'kannada': 'kn-IN',
            'bhojpuri': 'hi-IN',
            'tamil': 'ta-IN',
            'telugu': 'te-IN'
        };

        // Complete translations for all UI elements
        const translations = {
            hindi: {
                headerTitle: 'ЁЯзб Nyaya Mitra - рдиреНрдпрд╛рдп рдорд┐рддреНрд░',
                mainHeading: 'рдиреНрдпрд╛рдп рдорд┐рддреНрд░',
                mainSubtitle: 'рдЖрдкрдХрд╛ рдХрд╛рдиреВрдиреА рджреЛрд╕реНрдд',
                langHeading: 'ЁЯЧгя╕П рдЕрдкрдиреА рднрд╛рд╖рд╛ рдЪреБрдиреЗрдВ:',
                buttonText: 'ЁЯСЖ рдмрдЯрди рджрдмрд╛рдПрдВ рдФрд░ рдмреЛрд▓реЗрдВ',
                subtitle: 'рдЕрдкрдиреА рд╕рдорд╕реНрдпрд╛ рдмрддрд╛рдПрдВ',
                examplesHeading: 'ЁЯТм рдЖрдк рдХреНрдпрд╛ рдмреЛрд▓ рд╕рдХрддреЗ рд╣реИрдВ?',
                listening: 'ЁЯОд рд╕реБрди рд░рд╣рд╛ рд╣реВрдБ... рдмреЛрд▓рд┐рдП...',
                youSaid: 'ЁЯУЭ рдЖрдкрдиреЗ рдХрд╣рд╛:',
                recognized: 'тЬЕ рдЖрдкрдХреА рдЖрд╡рд╛рдЬрд╝ рдкрд╣рдЪрд╛рди рд▓реА рдЧрдИ!',
                tryAgain: 'ЁЯФД рдлрд┐рд░ рд╕реЗ рдХреЛрд╢рд┐рд╢ рдХрд░реЗрдВ',
                loading: 'тЪЦя╕П рдХрд╛рдиреВрдиреА рд╕рд▓рд╛рд╣ рддреИрдпрд╛рд░ рдХрд░ рд░рд╣реЗ рд╣реИрдВ...',
                errorTitle: 'тЭМ рд╕рд░реНрд╡рд░ рд╕реЗ рдХрдиреЗрдХреНрдЯ рдирд╣реАрдВ рд╣реЛ рдкрд╛ рд░рд╣рд╛',
                errorMessage: 'рдХреГрдкрдпрд╛ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ рд╕рд░реНрд╡рд░ рдЪрд▓ рд░рд╣рд╛ рд╣реИред',
                errorFallback: 'рдЕрднреА рдХреЗ рд▓рд┐рдП рдЗрди рд╣реЗрд▓реНрдкрд▓рд╛рдЗрди рдирдВрдмрд░реЛрдВ рдкрд░ рд╕рдВрдкрд░реНрдХ рдХрд░реЗрдВ:',
                examples: [
                    { icon: 'ЁЯТ░', title: 'рд╡реЗрддрди рдирд╣реАрдВ рдорд┐рд▓рд╛' },
                    { icon: 'ЁЯПб', title: 'рдЬрдореАрди рдХрд╛ рдЭрдЧрдбрд╝рд╛' },
                    { icon: 'ЁЯСо', title: 'рдкреБрд▓рд┐рд╕ рд╢рд┐рдХрд╛рдпрдд' },
                    { icon: 'ЁЯНЪ', title: 'рд░рд╛рд╢рди рдХрд╛рд░реНрдб рдЪрд╛рд╣рд┐рдП' },
                    { icon: 'ЁЯзУ', title: 'рдкреЗрдВрд╢рди рдЪрд╛рд╣рд┐рдП' },
                    { icon: 'ЁЯСйтАНтЪЦя╕П', title: 'рдореБрдлреНрдд рд╡рдХреАрд▓ рдЪрд╛рд╣рд┐рдП' }
                ]
            },
            english: {
                headerTitle: 'ЁЯзб Nyaya Mitra - Your Legal Friend',
                mainHeading: 'Nyaya Mitra',
                mainSubtitle: 'Your Legal Friend',
                langHeading: 'ЁЯЧгя╕П Choose Your Language:',
                buttonText: 'ЁЯСЖ Press button and speak',
                subtitle: 'Tell us your problem',
                examplesHeading: 'ЁЯТм What can you say?',
                listening: 'ЁЯОд Listening... Speak now...',
                youSaid: 'ЁЯУЭ You said:',
                recognized: 'тЬЕ Speech recognized successfully!',
                tryAgain: 'ЁЯФД Try Again',
                loading: 'тЪЦя╕П Preparing legal advice...',
                errorTitle: 'тЭМ Cannot connect to server',
                errorMessage: 'Please ensure the server is running.',
                errorFallback: 'For now, please contact these helplines:',
                examples: [
                    { icon: 'ЁЯТ░', title: 'Salary not paid' },
                    { icon: 'ЁЯПб', title: 'Land dispute' },
                    { icon: 'ЁЯСо', title: 'Police complaint' },
                    { icon: 'ЁЯНЪ', title: 'Need ration card' },
                    { icon: 'ЁЯзУ', title: 'Need pension' },
                    { icon: 'ЁЯСйтАНтЪЦя╕П', title: 'Need free lawyer' }
                ]
            },
            kannada: {
                headerTitle: 'ЁЯзб р▓ир│Нр▓пр▓╛р▓п р▓ор▓┐р▓др│Нр▓░ - р▓ир▓┐р▓ор│Нр▓о р▓Хр▓╛р▓ир│Вр▓ир│Б р▓╕р│Нр▓ир│Зр▓╣р▓┐р▓д',
                mainHeading: 'р▓ир│Нр▓пр▓╛р▓п р▓ор▓┐р▓др│Нр▓░',
                mainSubtitle: 'р▓ир▓┐р▓ор│Нр▓о р▓Хр▓╛р▓ир│Вр▓ир│Б р▓╕р│Нр▓ир│Зр▓╣р▓┐р▓д',
                langHeading: 'ЁЯЧгя╕П р▓ир▓┐р▓ор│Нр▓о р▓нр▓╛р▓╖р│Жр▓пр▓ир│Нр▓ир│Б р▓Жр▓░р▓┐р▓╕р▓┐:',
                buttonText: 'ЁЯСЖ р▓Чр│Бр▓Вр▓бр▓┐р▓пр▓ир│Нр▓ир│Б р▓Тр▓др│Нр▓др▓┐ р▓ор▓др│Нр▓др│Б р▓ор▓╛р▓др▓ир▓╛р▓бр▓┐',
                subtitle: 'р▓ир▓┐р▓ор│Нр▓о р▓╕р▓ор▓╕р│Нр▓пр│Жр▓пр▓ир│Нр▓ир│Б р▓╣р│Зр▓│р▓┐',
                examplesHeading: 'ЁЯТм р▓ир│Ар▓╡р│Б р▓Пр▓ир│Б р▓╣р│Зр▓│р▓мр▓╣р│Бр▓жр│Б?',
                listening: 'ЁЯОд р▓Хр│Зр▓│р│Бр▓др│Нр▓др▓┐р▓жр│Нр▓жр│Зр▓ир│Ж... р▓Ир▓Ч р▓ор▓╛р▓др▓ир▓╛р▓бр▓┐...',
                youSaid: 'ЁЯУЭ р▓ир│Ар▓╡р│Б р▓╣р│Зр▓│р▓┐р▓жр│Нр▓жр│Б:',
                recognized: 'тЬЕ р▓зр│Нр▓╡р▓ир▓┐ р▓Чр│Бр▓░р│Бр▓др▓┐р▓╕р▓▓р▓╛р▓Чр▓┐р▓жр│Ж!',
                tryAgain: 'ЁЯФД р▓ор▓др│Нр▓др│Ж р▓кр│Нр▓░р▓пр▓др│Нр▓ир▓┐р▓╕р▓┐',
                loading: 'тЪЦя╕П р▓Хр▓╛р▓ир│Вр▓ир│Б р▓╕р▓▓р▓╣р│Жр▓пр▓ир│Нр▓ир│Б р▓др▓пр▓╛р▓░р▓┐р▓╕р▓▓р▓╛р▓Чр│Бр▓др│Нр▓др▓┐р▓жр│Ж...',
                errorTitle: 'тЭМ р▓╕р▓░р│Нр▓╡р▓░р│НтАМр▓Чр│Ж р▓╕р▓Вр▓кр▓░р│Нр▓Хр▓┐р▓╕р▓▓р│Б р▓╕р▓╛р▓зр│Нр▓пр▓╡р▓┐р▓▓р│Нр▓▓',
                errorMessage: 'р▓╕р▓░р│Нр▓╡р▓░р│Н р▓░р▓ир│Н р▓Жр▓Чр│Бр▓др│Нр▓др▓┐р▓жр│Жр▓пр│З р▓Ор▓Вр▓жр│Б р▓Цр▓Ър▓┐р▓др▓кр▓бр▓┐р▓╕р▓┐р▓Хр│Кр▓│р│Нр▓│р▓┐.',
                errorFallback: 'р▓Ир▓Ч р▓И р▓╣р│Жр▓▓р│Нр▓кр│НтАМр▓▓р│Ир▓ир│Н р▓╕р▓Вр▓Цр│Нр▓пр│Жр▓Чр▓│р▓ир│Нр▓ир│Б р▓╕р▓Вр▓кр▓░р│Нр▓Хр▓┐р▓╕р▓┐:',
                examples: [
                    { icon: 'ЁЯТ░', title: 'р▓╕р▓Вр▓мр▓│ р▓╕р▓┐р▓Хр│Нр▓Хр▓┐р▓▓р│Нр▓▓' },
                    { icon: 'ЁЯПб', title: 'р▓нр│В р▓╡р▓┐р▓╡р▓╛р▓ж' },
                    { icon: 'ЁЯСо', title: 'р▓кр│Кр▓▓р│Ар▓╕р│Н р▓жр│Вр▓░р│Б' },
                    { icon: 'ЁЯНЪ', title: 'р▓кр▓бр▓┐р▓др▓░ р▓Хр▓╛р▓░р│Нр▓бр│Н р▓мр│Зр▓Хр│Б' },
                    { icon: 'ЁЯзУ', title: 'р▓кр▓┐р▓Вр▓Ър▓гр▓┐ р▓мр│Зр▓Хр│Б' },
                    { icon: 'ЁЯСйтАНтЪЦя╕П', title: 'р▓Йр▓Ър▓┐р▓д р▓╡р▓Хр│Ар▓▓ р▓мр│Зр▓Хр│Б' }
                ]
            },
            bhojpuri: {
                headerTitle: 'ЁЯзб рдиреНрдпрд╛рдп рдорд┐рддреНрд░ - рд░рд╛рдЙрд░ рдХрд╛рдиреВрдиреА рд╕рд╛рдереА',
                mainHeading: 'рдиреНрдпрд╛рдп рдорд┐рддреНрд░',
                mainSubtitle: 'рд░рд╛рдЙрд░ рдХрд╛рдиреВрдиреА рд╕рд╛рдереА',
                langHeading: 'ЁЯЧгя╕П рдЕрдкрдирд╛ рднрд╛рд╖рд╛ рдЪреБрдиреАрдВ:',
                buttonText: 'ЁЯСЖ рдмрдЯрди рджрдмрд╛рдИрдВ рдЖ рдмреЛрд▓реАрдВ',
                subtitle: 'рдЕрдкрдирд╛ рдкрд░реЗрд╢рд╛рдиреА рдмрддрд╛рдИрдВ',
                examplesHeading: 'ЁЯТм рдХрд╛ рдмреЛрд▓ рд╕рдХрдд рдмрд╛рдиреА?',
                listening: 'ЁЯОд рд╕реБрди рд░рд╣рд▓ рдмрд╛рдиреА... рдмреЛрд▓реАрдВ...',
                youSaid: 'ЁЯУЭ рд░рд╛рдЙрд░ рдХрд╣рдирд╛рдо:',
                recognized: 'тЬЕ рдЖрд╡рд╛рдЬрд╝ рдкрд╣рдЪрд╛рди рд▓рд┐рд╣рд▓ рдЧрдЗрд▓!',
                tryAgain: 'ЁЯФД рдлрд┐рд░ рд╕реЗ рдХреЛрд╢рд┐рд╢ рдХрд░реАрдВ',
                loading: 'тЪЦя╕П рдХрд╛рдиреВрдиреА рд╕рд▓рд╛рд╣ рддреИрдпрд╛рд░ рдХрдЗрд▓ рдЬрд╛ рд░рд╣рд▓ рдмрд╛...',
                errorTitle: 'тЭМ рд╕рд░реНрд╡рд░ рд╕реЗ рдХрдиреЗрдХреНрдЯ рдирд╛ рд╣реЛ рдкрд╛рд╡рдд рдмрд╛',
                errorMessage: 'рдХреГрдкрдпрд╛ рджреЗрдЦ рд▓реАрдВ рдХрд┐ рд╕рд░реНрд╡рд░ рдЪрд▓ рд░рд╣рд▓ рдмрд╛ рдХрд┐ рдирд╛ред',
                errorFallback: 'рдЕрднреА рдПрд╣ рд╣реЗрд▓реНрдкрд▓рд╛рдЗрди рдирдВрдмрд░ рдкрд░ рд╕рдВрдкрд░реНрдХ рдХрд░реАрдВ:',
                examples: [
                    { icon: 'ЁЯТ░', title: 'рддрдирдЦрд╛ рдирд╛ рдорд┐рд▓рд▓' },
                    { icon: 'ЁЯПб', title: 'рдЬрдореАрди рдХреЗ рдЭрдЧрдбрд╝рд╛' },
                    { icon: 'ЁЯСо', title: 'рдкреБрд▓рд┐рд╕ рдХреЗ рд╢рд┐рдХрд╛рдпрдд' },
                    { icon: 'ЁЯНЪ', title: 'рд░рд╛рд╢рди рдХрд╛рд░реНрдб рдЪрд╛рд╣реАрдВ' },
                    { icon: 'ЁЯзУ', title: 'рдкреЗрдВрд╢рди рдЪрд╛рд╣реАрдВ' },
                    { icon: 'ЁЯСйтАНтЪЦя╕П', title: 'рдореБрдлреНрдд рд╡рдХреАрд▓ рдЪрд╛рд╣реАрдВ' }
                ]
            },
            tamil: {
                headerTitle: 'ЁЯзб роиро┐ропро╛роп рооро┐родрпНро░ро╛ - роЙроЩрпНроХро│рпН роЪроЯрпНроЯ роирогрпНрокро░рпН',
                mainHeading: 'роиро┐ропро╛роп рооро┐родрпНро░ро╛',
                mainSubtitle: 'роЙроЩрпНроХро│рпН роЪроЯрпНроЯ роирогрпНрокро░рпН',
                langHeading: 'ЁЯЧгя╕П роЙроЩрпНроХро│рпН роорпКро┤ро┐ропрпИродрпН родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН:',
                buttonText: 'ЁЯСЖ рокроЯрпНроЯройрпИ роЕро┤рпБродрпНродро┐ рокрпЗроЪрпБроЩрпНроХро│рпН',
                subtitle: 'роЙроЩрпНроХро│рпН рокро┐ро░роЪрпНроЪройрпИропрпИроЪрпН роЪрпКро▓рпНро▓рпБроЩрпНроХро│рпН',
                examplesHeading: 'ЁЯТм роирпАроЩрпНроХро│рпН роОройрпНрой роЪрпКро▓рпНро▓ро▓ро╛роорпН?',
                listening: 'ЁЯОд роХрпЗроЯрпНроХро┐ро▒рпЗройрпН... рокрпЗроЪрпБроЩрпНроХро│рпН...',
                youSaid: 'ЁЯУЭ роирпАроЩрпНроХро│рпН роЪрпКройрпНройродрпБ:',
                recognized: 'тЬЕ рокрпЗроЪрпНроЪрпБ роЕроЩрпНроХрпАроХро░ро┐роХрпНроХрокрпНрокроЯрпНроЯродрпБ!',
                tryAgain: 'ЁЯФД роорпАрогрпНроЯрпБроорпН роорпБропро▒рпНроЪро┐роХрпНроХро╡рпБроорпН',
                loading: 'тЪЦя╕П роЪроЯрпНроЯ роЖро▓рпЛроЪройрпИ родропро╛ро░ро┐роХрпНроХрокрпНрокроЯрпБроХро┐ро▒родрпБ...',
                errorTitle: 'тЭМ роЪро░рпНро╡ро░рпБроЯройрпН роЗрогрпИроХрпНроХ роорпБроЯро┐ропро╡ро┐ро▓рпНро▓рпИ',
                errorMessage: 'роЪро░рпНро╡ро░рпН роЗропроЩрпНроХрпБроХро┐ро▒родро╛ роОройрпНрокродрпИ роЙро▒рпБродро┐рокрпНрокроЯрпБродрпНродро╡рпБроорпН.',
                errorFallback: 'родро▒рпНрокрпЛродрпИроХрпНроХрпБ роЗроирпНрод роЙродро╡ро┐ роОрогрпНроХро│рпИ родрпКроЯро░рпНрокрпБ роХрпКро│рпНро│ро╡рпБроорпН:',
                examples: [
                    { icon: 'ЁЯТ░', title: 'роЪроорпНрокро│роорпН роХро┐роЯрпИроХрпНроХро╡ро┐ро▓рпНро▓рпИ' },
                    { icon: 'ЁЯПб', title: 'роиро┐ро▓ родроХро░ро╛ро▒рпБ' },
                    { icon: 'ЁЯСо', title: 'роХро╛ро╡ро▓рпН рокрпБроХро╛ро░рпН' },
                    { icon: 'ЁЯНЪ', title: 'ро░рпЗро╖ройрпН роХро╛ро░рпНроЯрпБ родрпЗро╡рпИ' },
                    { icon: 'ЁЯзУ', title: 'роУропрпНро╡рпВродро┐ропроорпН родрпЗро╡рпИ' },
                    { icon: 'ЁЯСйтАНтЪЦя╕П', title: 'роЗро▓ро╡роЪ ро╡ро┤роХрпНроХро▒ро┐роЮро░рпН родрпЗро╡рпИ' }
                ]
            },
            telugu: {
                headerTitle: 'ЁЯзб р░ир▒Нр░пр░╛р░п р░ор░┐р░др▒Нр░░ - р░ор▒А р░ир▒Нр░пр░╛р░п р░ор░┐р░др▒Нр░░р▒Бр░бр▒Б',
                mainHeading: 'р░ир▒Нр░пр░╛р░п р░ор░┐р░др▒Нр░░',
                mainSubtitle: 'р░ор▒А р░ир▒Нр░пр░╛р░п р░ор░┐р░др▒Нр░░р▒Бр░бр▒Б',
                langHeading: 'ЁЯЧгя╕П р░ор▒А р░нр░╛р░╖р░ир▒Б р░Ор░Вр░Ър▒Бр░Хр▒Лр░Вр░бр░┐:',
                buttonText: 'ЁЯСЖ р░мр░Яр░ир▒НтАМр░ир▒Б р░ир▒Кр░Хр▒Нр░Хр░┐ р░ор░╛р░Яр▒Нр░▓р░╛р░бр░Вр░бр░┐',
                subtitle: 'р░ор▒А р░╕р░ор░╕р▒Нр░пр░ир▒Б р░Ър▒Жр░кр▒Нр░кр░Вр░бр░┐',
                examplesHeading: 'ЁЯТм р░ор▒Ар░░р▒Б р░Пр░ор░┐ р░Ър▒Жр░кр▒Нр░кр░Чр░▓р░░р▒Б?',
                listening: 'ЁЯОд р░╡р░┐р░Вр░Яр▒Бр░ир▒Нр░ир░╛р░ир▒Б... р░ор░╛р░Яр▒Нр░▓р░╛р░бр░Вр░бр░┐...',
                youSaid: 'ЁЯУЭ р░ор▒Ар░░р▒Б р░Ър▒Жр░кр▒Нр░кр░┐р░ир░жр░┐:',
                recognized: 'тЬЕ р░кр▒Нр░░р░╕р░Вр░Чр░В р░Чр▒Бр░░р▒Нр░др░┐р░Вр░Ър░мр░бр░┐р░Вр░жр░┐!',
                tryAgain: 'ЁЯФД р░ор░│р▒Нр░│р▒А р░кр▒Нр░░р░пр░др▒Нр░ир░┐р░Вр░Ър░Вр░бр░┐',
                loading: 'тЪЦя╕П р░ир▒Нр░пр░╛р░п р░╕р░▓р░╣р░╛ р░др░пр░╛р░░р▒Б р░Ър▒Зр░пр░мр░бр▒Бр░др▒Лр░Вр░жр░┐...',
                errorTitle: 'тЭМ р░╕р░░р▒Нр░╡р░░р▒НтАМр░Хр▒Б р░Хр░ир▒Жр░Хр▒Нр░Яр▒Н р░Ър▒Зр░пр░бр░В р░╕р░╛р░зр▒Нр░пр░В р░Хр░╛р░▓р▒Зр░жр▒Б',
                errorMessage: 'р░╕р░░р▒Нр░╡р░░р▒Н р░░р░ир▒Нр░ир░┐р░Вр░Чр▒Н р░▓р▒Л р░Йр░Вр░жр░╛ р░Ер░ир░┐ р░ир░┐р░░р▒Нр░зр░╛р░░р░┐р░Вр░Ър▒Бр░Хр▒Лр░Вр░бр░┐.',
                errorFallback: 'р░кр▒Нр░░р░╕р▒Нр░др▒Бр░др░╛р░ир░┐р░Хр░┐ р░И р░╣р▒Жр░▓р▒Нр░кр▒НтАМр░▓р▒Ир░ир▒Н р░ир░Вр░мр░░р▒НтАМр░▓р░ир▒Б р░╕р░Вр░кр▒Нр░░р░жр░┐р░Вр░Ър░Вр░бр░┐:',
                examples: [
                    { icon: 'ЁЯТ░', title: 'р░Ьр▒Ар░др░В р░░р░╛р░▓р▒Зр░жр▒Б' },
                    { icon: 'ЁЯПб', title: 'р░нр▒Вр░ор░┐ р░╡р░┐р░╡р░╛р░жр░В' },
                    { icon: 'ЁЯСо', title: 'р░кр▒Лр░▓р▒Ар░╕р▒Б р░лр░┐р░░р▒Нр░пр░╛р░жр▒Б' },
                    { icon: 'я┐╜', title: 'р░░р▒Зр░╖р░ир▒Н р░Хр░╛р░░р▒Нр░бр▒Б р░Хр░╛р░╡р░╛р░▓р░┐' },
                    { icon: 'ЁЯзУ', title: 'р░кр▒Жр░ир▒Нр░╖р░ир▒Н р░Хр░╛р░╡р░╛р░▓р░┐' },
                    { icon: 'ЁЯСйтАНтЪЦя╕П', title: 'р░Йр░Ър░┐р░д р░ир▒Нр░пр░╛р░пр░╡р░╛р░жр░┐ р░Хр░╛р░╡р░╛р░▓р░┐' }
                ]
            }
        };

        // Function to update ALL UI text based on selected language
        function updateUILanguage(lang) {
            const t = translations[lang];
            
            // Update all text elements
            document.getElementById('header-title').textContent = t.headerTitle;
            document.getElementById('main-heading').textContent = t.mainHeading;
            document.getElementById('main-subtitle').textContent = t.mainSubtitle;
            document.getElementById('lang-heading').textContent = t.langHeading;
            document.getElementById('examples-heading').textContent = t.examplesHeading;
            
            // Update instructions
            document.getElementById('instructions').innerHTML = `
                <p class="instruction-main">${t.buttonText}</p>
                <p class="instruction-sub">${t.subtitle}</p>
            `;
            
            // Update examples
            const exampleGrid = document.getElementById('example-grid');
            exampleGrid.innerHTML = '';
            t.examples.forEach(ex => {
                const card = document.createElement('div');
                card.className = 'example-card';
                card.innerHTML = `
                    <div class="icon">${ex.icon}</div>
                    <div class="title">${ex.title}</div>
                `;
                exampleGrid.appendChild(card);
            });
            
            console.log(`тЬЕ UI updated to ${lang}`);
        }

        // Initialize with Hindi
        updateUILanguage('hindi');

        // Language buttons
        const langButtons = document.querySelectorAll('.lang-button');
        langButtons.forEach(button => {
            button.addEventListener('click', () => {
                currentLanguage = button.dataset.lang;
                
                // Update active state
                langButtons.forEach(btn => btn.classList.remove('active'));
                button.classList.add('active');
                
                // Update ALL UI text
                updateUILanguage(currentLanguage);
                
                // Update recognition language
                if (recognition) {
                    recognition.lang = languageMap[currentLanguage];
                    console.log(`тЬЕ Language: ${currentLanguage}, Recognition: ${recognition.lang}`);
                }
            });
        });

        // Speech Recognition
        let isListening = false;

        if ('SpeechRecognition' in window || 'webkitSpeechRecognition' in window) {
            recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
            recognition.lang = languageMap[currentLanguage];
            recognition.continuous = false;
            recognition.interimResults = true;

            recognition.onstart = () => {
                console.log('ЁЯОд Started listening');
                isListening = true;
                const voiceOutput = document.getElementById('voice-output');
                const t = translations[currentLanguage];
                voiceOutput.classList.add('active');
                voiceOutput.innerHTML = `<p style="font-size: 1.5rem; color: #FF8C42;">${t.listening}</p>`;
            };

            recognition.onresult = (event) => {
                let finalTranscript = '';
                let interimTranscript = '';

                for (let i = event.resultIndex; i < event.results.length; i++) {
                    const transcript = event.results[i][0].transcript;
                    if (event.results[i].isFinal) {
                        finalTranscript += transcript;
                    } else {
                        interimTranscript += transcript;
                    }
                }

                const voiceOutput = document.getElementById('voice-output');
                const t = translations[currentLanguage];

                if (interimTranscript) {
                    voiceOutput.innerHTML = `
                        <p style="color: #6B7280; font-style: italic;">${t.listening.replace('ЁЯОд ', '')}</p>
                        <p style="font-size: 1.5rem; color: #FF8C42; margin-top: 1rem;">"${interimTranscript}"</p>
                    `;
                }

                if (finalTranscript) {
                    recognition.stop();
                    console.log('тЬЕ Final:', finalTranscript);
                    
                    // Show loading state with current language
                    const t = translations[currentLanguage];
                    voiceOutput.innerHTML = `
                        <div style="padding: 2rem; background: white; border-radius: 12px; text-align: center;">
                            <div style="font-size: 3rem; margin-bottom: 1rem;">тЪЦя╕П</div>
                            <h3 style="color: #FF8C42; margin-bottom: 1rem;">${t.youSaid}</h3>
                            <p style="font-size: 1.5rem; font-weight: 600; line-height: 1.6; color: #2E3440; margin-bottom: 2rem;">"${finalTranscript}"</p>
                            <div style="font-size: 2rem;">ЁЯФН</div>
                            <p style="color: #6B7280; margin-top: 1rem;">${t.loading}</p>
                        </div>
                    `;
                    
                    // Get legal advice from backend
                    fetchLegalAdvice(finalTranscript, currentLanguage);
                }
            };

            recognition.onerror = (event) => {
                console.error('тЭМ Error:', event.error);
                isListening = false;
                const voiceOutput = document.getElementById('voice-output');
                const t = translations[currentLanguage];
                voiceOutput.classList.add('active');
                voiceOutput.innerHTML = `
                    <div style="padding: 2rem; background: #FEE2E2; border-radius: 12px;">
                        <p style="color: #DC2626; font-weight: 600;">тЭМ Error: ${event.error}</p>
                        <button onclick="location.reload()" style="margin-top: 1rem; padding: 0.75rem 1.5rem; background: #DC2626; color: white; border: none; border-radius: 8px; cursor: pointer;">${t.tryAgain}</button>
                    </div>
                `;
            };

            recognition.onend = () => {
                console.log('ЁЯЫС Stopped listening');
                isListening = false;
            };

            
            document.getElementById('mic-button').addEventListener('click', () => {
                console.log('ЁЯОд Mic button clicked');
                
                if (isListening) {
                    console.log('тЪая╕П Already listening, stopping first...');
                    recognition.stop();
                    return;
                }
                
                try {
                    recognition.start();
                } catch (error) {
                    console.error('Error starting recognition:', error);
                    isListening = false;
                    const t = translations[currentLanguage];
                    const voiceOutput = document.getElementById('voice-output');
                    voiceOutput.classList.add('active');
                    voiceOutput.innerHTML = `
                        <div style="padding: 2rem; background: #FEE2E2; border-radius: 12px;">
                            <p style="color: #DC2626; font-weight: 600;">тЭМ ${error.message}</p>
                            <button onclick="location.reload()" style="margin-top: 1rem; padding: 0.75rem 1.5rem; background: #DC2626; color: white; border: none; border-radius: 8px; cursor: pointer;">${t.tryAgain}</button>
                        </div>
                    `;
                }
            });

            console.log('тЬЕ Speech Recognition ready');
        } else {
            console.error('тЭМ Speech Recognition not supported');
            document.getElementById('mic-button').disabled = true;
            document.getElementById('mic-button').style.opacity = '0.5';
            const t = translations[currentLanguage];
            document.getElementById('instructions').innerHTML = `<p style="color: #DC2626;">Speech Recognition not supported in this browser. Please use Chrome, Edge, or Safari.</p>`;
        }

        // Function to fetch legal advice from backend
        async function fetchLegalAdvice(query, language) {
            const voiceOutput = document.getElementById('voice-output');
            const t = translations[currentLanguage];
            
            try {
                // Call backend API
                const response = await fetch('http://localhost:3000/api/legal-advice', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ query, language })
                });
                
                const data = await response.json();
                console.log('Legal Advice Response:', data);
                
                // Build the advice display
                let adviceHTML = `
                    <div style="padding: 2rem; background: white; border-radius: 12px; max-width: 900px; margin: 0 auto;">
                        <div style="text-align: center; margin-bottom: 2rem;">
                            <div style="font-size: 4rem; margin-bottom: 1rem;">тЪЦя╕П</div>
                            <h2 style="color: #FF8C42; margin-bottom: 1rem;">рдЖрдкрдХреА рдХрд╛рдиреВрдиреА рд╕рд▓рд╛рд╣</h2>
                            <p style="font-size: 1.2rem; color: #2E3440; font-weight: 600;">"${query}"</p>
                        </div>
                `;
                
                // Show IPC Section if applicable
                if (data.analysis.ipcSection) {
                    adviceHTML += `
                        <div style="background: #FFF4ED; padding: 1.5rem; border-radius: 8px; margin-bottom: 2rem; border-left: 4px solid #FF8C42;">
                            <h3 style="color: #FF8C42; margin-bottom: 0.5rem;">ЁЯУЛ рд▓рд╛рдЧреВ рдХрд╛рдиреВрдиреА рдзрд╛рд░рд╛ (IPC Section)</h3>
                            <p style="font-size: 1.3rem; font-weight: 700; color: #2E3440; margin: 0.5rem 0;">IPC рдзрд╛рд░рд╛ ${data.analysis.ipcSection.section}</p>
                            <p style="color: #6B7280; margin: 0.5rem 0;">${data.analysis.ipcSection.description}</p>
                            <p style="color: #DC2626; font-weight: 600; margin-top: 0.5rem;">рд╕рдЬрд╛: ${data.analysis.ipcSection.punishment}</p>
                            ${data.analysis.ipcSection.act ? `<p style="font-size: 0.9rem; color: #6B7280; margin-top: 0.5rem;">ЁЯУЦ ${data.analysis.ipcSection.act}</p>` : ''}
                        </div>
                    `;
                }
                
                // Show relevant legal act reference if available
                if (data.analysis.relevantAct) {
                    adviceHTML += `
                        <div style="background: #EFF6FF; padding: 1.5rem; border-radius: 8px; margin-bottom: 2rem; border-left: 4px solid #3B82F6;">
                            <h3 style="color: #3B82F6; margin-bottom: 0.5rem;">тЪЦя╕П рд╕рдВрдмрдВрдзрд┐рдд рдХрд╛рдиреВрди (Applicable Law)</h3>
                            <p style="font-size: 1.2rem; font-weight: 700; color: #2E3440; margin: 0.5rem 0;">${data.analysis.relevantAct.name}</p>
                            <p style="font-size: 1.1rem; color: #1E40AF; margin: 0.5rem 0;">рдзрд╛рд░рд╛ ${data.analysis.relevantAct.section}</p>
                            ${data.analysis.relevantAct.description ? `<p style="color: #6B7280; margin: 0.5rem 0;">${data.analysis.relevantAct.description}</p>` : ''}
                            ${data.analysis.relevantAct.reference ? `<a href="${data.analysis.relevantAct.reference}" target="_blank" style="display: inline-block; margin-top: 0.5rem; color: #3B82F6; text-decoration: underline;">ЁЯУД рдкреВрд░рд╛ рдХрд╛рдиреВрди рдкрдврд╝реЗрдВ тЖТ</a>` : ''}
                        </div>
                    `;
                }
                
                // Show advice
                if (data.advice.text) {
                    adviceHTML += `
                        <div style="background: #F0FDF4; padding: 1.5rem; border-radius: 8px; margin-bottom: 2rem; border-left: 4px solid #10B981;">
                            <h3 style="color: #10B981; margin-bottom: 1rem;">ЁЯТб рдХрд╛рдиреВрдиреА рд╕рд▓рд╛рд╣</h3>
                            <p style="font-size: 1.1rem; line-height: 1.8; color: #2E3440;">${data.advice.text}</p>
                        </div>
                    `;
                }
                
                // Show steps to take
                if (data.advice.steps && data.advice.steps.length > 0) {
                    adviceHTML += `
                        <div style="background: #EFF6FF; padding: 1.5rem; border-radius: 8px; margin-bottom: 2rem; border-left: 4px solid #3B82F6;">
                            <h3 style="color: #3B82F6; margin-bottom: 1rem;">ЁЯУЭ рдЖрдкрдХреЛ рдХреНрдпрд╛ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП</h3>
                            <div style="text-align: left;">
                    `;
                    data.advice.steps.forEach(step => {
                        adviceHTML += `<p style="margin: 0.5rem 0; color: #2E3440; line-height: 1.6;">тЬУ ${step}</p>`;
                    });
                    adviceHTML += `</div></div>`;
                }
                
                // Show rights
                if (data.advice.rights && data.advice.rights.length > 0) {
                    adviceHTML += `
                        <div style="background: #FEF3C7; padding: 1.5rem; border-radius: 8px; margin-bottom: 2rem; border-left: 4px solid #F59E0B;">
                            <h3 style="color: #F59E0B; margin-bottom: 1rem;">тЪб рдЖрдкрдХреЗ рдЕрдзрд┐рдХрд╛рд░</h3>
                            <div style="text-align: left;">
                    `;
                    data.advice.rights.forEach(right => {
                        adviceHTML += `<p style="margin: 0.5rem 0; color: #2E3440; line-height: 1.6;">тШЕ ${right}</p>`;
                    });
                    adviceHTML += `</div></div>`;
                }
                
                // Show nearest police station button if complaint needed
                if (data.analysis.needsPoliceComplaint) {
                    adviceHTML += `
                        <div style="background: #FEE2E2; padding: 1.5rem; border-radius: 8px; margin-bottom: 2rem; border-left: 4px solid #DC2626;">
                            <h3 style="color: #DC2626; margin-bottom: 1rem;">ЁЯЪи рдкреБрд▓рд┐рд╕ рд╢рд┐рдХрд╛рдпрдд рдЬрд░реВрд░реА рд╣реИ</h3>
                            <p style="color: #2E3440; margin-bottom: 1rem;">рдЖрдкрдХреЛ рддреБрд░рдВрдд рдирдЬрджреАрдХреА рдкреБрд▓рд┐рд╕ рд╕реНрдЯреЗрд╢рди рдореЗрдВ FIR рджрд░реНрдЬ рдХрд░рд╛рдиреА рдЪрд╛рд╣рд┐рдПред</p>
                            <button onclick="findNearestPoliceStation()" style="padding: 0.75rem 1.5rem; background: #DC2626; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 1rem; font-weight: 600;">
                                ЁЯУН рдирдЬрджреАрдХреА рдкреБрд▓рд┐рд╕ рд╕реНрдЯреЗрд╢рди рдЦреЛрдЬреЗрдВ
                            </button>
                        </div>
                    `;
                }
                
                // Show relevant portal if available
                if (data.analysis.relevantPortal) {
                    const portal = data.analysis.relevantPortal;
                    adviceHTML += `
                        <div style="background: #F3E8FF; padding: 1.5rem; border-radius: 8px; margin-bottom: 2rem; border-left: 4px solid #9333EA;">
                            <h3 style="color: #9333EA; margin-bottom: 1rem;">ЁЯМР рдСрдирд▓рд╛рдЗрди рд╕реЗрд╡рд╛ рдкреЛрд░реНрдЯрд▓</h3>
                            <p style="color: #2E3440; margin-bottom: 1rem;">${portal.description}</p>
                            <a href="${portal.url}" target="_blank" style="display: inline-block; padding: 0.75rem 1.5rem; background: #9333EA; color: white; text-decoration: none; border-radius: 8px; font-weight: 600;">
                                ЁЯФЧ ${portal.name} рдкрд░ рдЬрд╛рдПрдВ тЖТ
                            </a>
                        </div>
                    `;
                }
                
                // Show help resources
                if (data.advice.helpResources && data.advice.helpResources.length > 0) {
                    adviceHTML += `
                        <div style="background: #F9FAFB; padding: 1.5rem; border-radius: 8px; margin-bottom: 2rem;">
                            <h3 style="color: #6B7280; margin-bottom: 1rem;">ЁЯУЮ рдорджрдж рдХреЗ рд▓рд┐рдП рд╕рдВрдкрд░реНрдХ рдХрд░реЗрдВ</h3>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                    `;
                    data.advice.helpResources.forEach(resource => {
                        adviceHTML += `
                            <div style="background: white; padding: 1rem; border-radius: 8px; text-align: center; border: 2px solid #E5E7EB;">
                                <p style="font-weight: 700; color: #2E3440; margin-bottom: 0.5rem;">${resource.name}</p>
                                <p style="font-size: 1.5rem; font-weight: 700; color: #FF8C42; margin: 0.5rem 0;">${resource.contact}</p>
                                <p style="font-size: 0.9rem; color: #6B7280;">${resource.description}</p>
                            </div>
                        `;
                    });
                    adviceHTML += `</div></div>`;
                }
                
                // Add action buttons
                adviceHTML += `
                    <div style="text-align: center; margin-top: 2rem; display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
                        <button onclick="location.reload()" style="padding: 0.75rem 1.5rem; background: #FF8C42; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 1rem; font-weight: 600;">
                            ЁЯФД рдирдИ рд╕рдорд╕реНрдпрд╛ рдмрддрд╛рдПрдВ
                        </button>
                        <button onclick="window.print()" style="padding: 0.75rem 1.5rem; background: #3B82F6; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 1rem; font-weight: 600;">
                            ЁЯЦия╕П рдкреНрд░рд┐рдВрдЯ рдХрд░реЗрдВ
                        </button>
                    </div>
                </div>
                `;
                
                voiceOutput.innerHTML = adviceHTML;
                
            } catch (error) {
                console.error('Error fetching legal advice:', error);
                const t = translations[currentLanguage];
                voiceOutput.innerHTML = `
                    <div style="padding: 2rem; background: #FEE2E2; border-radius: 12px;">
                        <h3 style="color: #DC2626; margin-bottom: 1rem;">${t.errorTitle}</h3>
                        <p style="color: #2E3440; margin-bottom: 1rem;">${t.errorMessage}</p>
                        <p style="color: #6B7280; margin-bottom: 1.5rem;">${t.errorFallback}</p>
                        <div style="background: white; padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                            <p><strong>NALSA Helpline:</strong> 15100</p>
                            <p><strong>Women Helpline:</strong> 181</p>
                            <p><strong>Police:</strong> 100</p>
                        </div>
                        <button onclick="location.reload()" style="padding: 0.75rem 1.5rem; background: #DC2626; color: white; border: none; border-radius: 8px; cursor: pointer;">${t.tryAgain}</button>
                    </div>
                `;
            }
        }

        // Function to find nearest police stations
        async function findNearestPoliceStation() {
            const voiceOutput = document.getElementById('voice-output');
            
            try {
                // Try to get user's location
                if (navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(async (position) => {
                        const { latitude, longitude } = position.coords;
                        
                        const response = await fetch('http://localhost:3000/api/nearest-police-station', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({ latitude, longitude })
                        });
                        
                        const data = await response.json();
                        
                        let stationsHTML = `
                            <div style="background: white; padding: 2rem; border-radius: 12px; margin-top: 2rem;">
                                <h3 style="color: #DC2626; margin-bottom: 1.5rem; text-align: center;">ЁЯЪи рдирдЬрджреАрдХреА рдкреБрд▓рд┐рд╕ рд╕реНрдЯреЗрд╢рди</h3>
                                <div style="display: grid; gap: 1rem;">
                        `;
                        
                        data.stations.forEach((station, index) => {
                            stationsHTML += `
                                <div style="background: #F9FAFB; padding: 1.5rem; border-radius: 8px; border: 2px solid #E5E7EB;">
                                    <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                                        <h4 style="color: #2E3440; margin: 0; font-size: 1.2rem;">${index + 1}. ${station.name}</h4>
                                        <span style="background: #DBEAFE; color: #1E40AF; padding: 0.25rem 0.75rem; border-radius: 4px; font-size: 0.9rem; font-weight: 600;">${station.distance}</span>
                                    </div>
                                    ${station.type ? `<p style="color: #9333EA; font-weight: 600; margin: 0.5rem 0;">${station.type}</p>` : ''}
                                    <p style="color: #6B7280; margin: 0.5rem 0;">ЁЯУН ${station.address}</p>
                                    <p style="color: #2E3440; font-weight: 600; margin: 0.5rem 0;">ЁЯУЮ ${station.phone}</p>
                                    <a href="${station.mapsUrl}" target="_blank" style="display: inline-block; margin-top: 0.5rem; padding: 0.5rem 1rem; background: #3B82F6; color: white; text-decoration: none; border-radius: 6px; font-size: 0.9rem;">
                                        ЁЯЧ║я╕П Maps рдкрд░ рджреЗрдЦреЗрдВ
                                    </a>
                                </div>
                            `;
                        });
                        
                        stationsHTML += `
                                </div>
                                <button onclick="history.back()" style="margin-top: 1.5rem; padding: 0.75rem 1.5rem; background: #6B7280; color: white; border: none; border-radius: 8px; cursor: pointer; width: 100%;">
                                    тЖР рд╡рд╛рдкрд╕ рдЬрд╛рдПрдВ
                                </button>
                            </div>
                        `;
                        
                        // Append to existing content
                        voiceOutput.innerHTML += stationsHTML;
                        
                        // Scroll to police stations
                        document.querySelector('#voice-output > div:last-child').scrollIntoView({ behavior: 'smooth' });
                        
                    }, (error) => {
                        console.error('Geolocation error:', error);
                        alert('Location access denied. Please enable location services.');
                    });
                } else {
                    alert('Geolocation is not supported by your browser.');
                }
            } catch (error) {
                console.error('Error finding police stations:', error);
                alert('Error finding police stations. Please try again.');
            }
        }
    </script>
</body>
</html>
