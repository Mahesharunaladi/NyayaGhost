<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>рдиреНрдпрд╛рдп рдорд┐рддреНрд░ - Legal AI Chat | Nyaya Mitra</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="manifest" href="manifest.json">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #FFF9F5 0%, #FFE8D9 100%);
            color: #2E3440;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        header {
            background: linear-gradient(135deg, #FF8C42 0%, #FF6B35 100%);
            color: white;
            padding: 1rem 2rem;
            box-shadow: 0 4px 12px rgba(255, 140, 66, 0.3);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        header h1 {
            font-size: 1.5rem;
            font-weight: 800;
        }

        .lang-selector {
            display: flex;
            gap: 0.5rem;
        }

        .lang-btn {
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid white;
            color: white;
            padding: 0.4rem 0.8rem;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }

        .lang-btn.active {
            background: white;
            color: #FF8C42;
        }

        .lang-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .container {
            flex: 1;
            display: flex;
            flex-direction: column;
            max-width: 1200px;
            width: 100%;
            margin: 0 auto;
            padding: 1rem;
        }

        .chat-container {
            flex: 1;
            background: white;
            border-radius: 16px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .chat-header {
            background: linear-gradient(135deg, #3B82F6 0%, #2563EB 100%);
            color: white;
            padding: 1.5rem;
            text-align: center;
        }

        .chat-header h2 {
            font-size: 1.3rem;
            margin-bottom: 0.5rem;
        }

        .chat-header p {
            opacity: 0.9;
            font-size: 0.9rem;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 2rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
            background: #F9FAFB;
        }

        .message {
            display: flex;
            gap: 1rem;
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message.user {
            flex-direction: row-reverse;
        }

        .message-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            flex-shrink: 0;
        }

        .message.user .message-avatar {
            background: linear-gradient(135deg, #FF8C42 0%, #FF6B35 100%);
        }

        .message.bot .message-avatar {
            background: linear-gradient(135deg, #3B82F6 0%, #2563EB 100%);
        }

        .message-content {
            max-width: 70%;
            padding: 1rem 1.5rem;
            border-radius: 16px;
            line-height: 1.6;
        }

        .message.user .message-content {
            background: linear-gradient(135deg, #FF8C42 0%, #FF6B35 100%);
            color: white;
            border-bottom-right-radius: 4px;
        }

        .message.bot .message-content {
            background: white;
            border: 1px solid #E5E7EB;
            border-bottom-left-radius: 4px;
        }

        .legal-section {
            background: #EFF6FF;
            border-left: 4px solid #3B82F6;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 8px;
        }

        .legal-section h4 {
            color: #1E40AF;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .legal-link {
            display: inline-block;
            color: #3B82F6;
            text-decoration: none;
            font-weight: 600;
            margin-top: 0.5rem;
            transition: color 0.3s;
        }

        .legal-link:hover {
            color: #2563EB;
            text-decoration: underline;
        }

        .typing-indicator {
            display: none;
            align-items: center;
            gap: 0.5rem;
            padding: 1rem;
            color: #6B7280;
        }

        .typing-indicator.active {
            display: flex;
        }

        .typing-dots {
            display: flex;
            gap: 4px;
        }

        .typing-dots span {
            width: 8px;
            height: 8px;
            background: #9CA3AF;
            border-radius: 50%;
            animation: bounce 1.4s infinite ease-in-out both;
        }

        .typing-dots span:nth-child(1) { animation-delay: -0.32s; }
        .typing-dots span:nth-child(2) { animation-delay: -0.16s; }

        @keyframes bounce {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1); }
        }

        .chat-input-area {
            padding: 1.5rem;
            background: white;
            border-top: 1px solid #E5E7EB;
        }

        .chat-input-container {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .chat-input {
            flex: 1;
            padding: 1rem 1.5rem;
            border: 2px solid #E5E7EB;
            border-radius: 24px;
            font-size: 1rem;
            font-family: 'Inter', sans-serif;
            transition: all 0.3s;
            resize: none;
            max-height: 120px;
        }

        .chat-input:focus {
            outline: none;
            border-color: #3B82F6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .voice-btn {
            background: linear-gradient(135deg, #10B981 0%, #059669 100%);
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            transition: all 0.3s;
            flex-shrink: 0;
            box-shadow: 0 2px 8px rgba(16, 185, 129, 0.3);
        }

        .voice-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.4);
        }

        .voice-btn.listening {
            animation: pulse 1.5s infinite;
            background: linear-gradient(135deg, #EF4444 0%, #DC2626 100%);
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
                box-shadow: 0 2px 8px rgba(239, 68, 68, 0.3);
            }
            50% {
                transform: scale(1.1);
                box-shadow: 0 4px 16px rgba(239, 68, 68, 0.6);
            }
        }

        .send-btn {
            background: linear-gradient(135deg, #3B82F6 0%, #2563EB 100%);
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            transition: all 0.3s;
            flex-shrink: 0;
        }

        .send-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
        }

        .send-btn:active {
            transform: scale(0.95);
        }

        .send-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .suggestions {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            margin-top: 1rem;
        }

        .suggestion-chip {
            background: #F3F4F6;
            border: 1px solid #E5E7EB;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s;
        }

        .suggestion-chip:hover {
            background: #E5E7EB;
            transform: translateY(-2px);
        }

        .quick-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            padding: 1rem;
        }

        .quick-action {
            background: linear-gradient(135deg, #10B981 0%, #059669 100%);
            color: white;
            padding: 1rem;
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border: none;
            font-weight: 600;
        }

        .quick-action:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 20px rgba(16, 185, 129, 0.3);
        }

        @media (max-width: 768px) {
            .message-content {
                max-width: 85%;
            }

            .lang-selector {
                flex-wrap: wrap;
            }

            .lang-btn {
                font-size: 0.8rem;
                padding: 0.3rem 0.6rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>тЪЦя╕П рдиреНрдпрд╛рдп рдорд┐рддреНрд░ - Legal AI</h1>
        <div class="lang-selector">
            <button class="lang-btn active" data-lang="hindi">рд╣рд┐рдВрджреА</button>
            <button class="lang-btn" data-lang="english">English</button>
            <button class="lang-btn" data-lang="kannada">р▓Хр▓ир│Нр▓ир▓б</button>
            <button class="lang-btn" data-lang="tamil">родрооро┐ро┤рпН</button>
            <button class="lang-btn" data-lang="telugu">р░др▒Жр░▓р▒Бр░Чр▒Б</button>
        </div>
    </header>

    <div class="container">
        <div class="chat-container">
            <div class="chat-header">
                <h2 id="chat-title">ЁЯТм рдЕрдкрдиреА рдХрд╛рдиреВрдиреА рд╕рдорд╕реНрдпрд╛ рдмрддрд╛рдПрдВ</h2>
                <p id="chat-subtitle">рдореИрдВ рдЖрдкрдХреА рдорджрдж рдХреЗ рд▓рд┐рдП рдпрд╣рд╛рдБ рд╣реВрдБ - рд╕рднреА рднрд╛рд░рддреАрдп рдХрд╛рдиреВрди, рдЕрдзрд┐рдирд┐рдпрдо рдФрд░ рд╕рдВрд╡рд┐рдзрд╛рди рдХреА рдЬрд╛рдирдХрд╛рд░реА</p>
            </div>

            <div class="chat-messages" id="chat-messages">
                <div class="message bot">
                    <div class="message-avatar">ЁЯдЦ</div>
                    <div class="message-content">
                        <p id="welcome-message"><strong>рдирдорд╕реНрддреЗ! рдореИрдВ рдЖрдкрдХрд╛ рдиреНрдпрд╛рдп рдорд┐рддреНрд░ рд╣реВрдБред</strong> ЁЯСЛ</p>
                        <p>рдореИрдВ рдЖрдкрдХреЛ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдореЗрдВ рдорджрдж рдХрд░ рд╕рдХрддрд╛ рд╣реВрдБ:</p>
                        <ul style="margin: 1rem 0; padding-left: 1.5rem;">
                            <li>рднрд╛рд░рддреАрдп рдХрд╛рдиреВрди рдФрд░ рдЕрдзрд┐рдирд┐рдпрдо рдХреА рдЬрд╛рдирдХрд╛рд░реА</li>
                            <li>IPC, CrPC, рднрд╛рд░рддреАрдп рд╕рдВрд╡рд┐рдзрд╛рди рдХреА рдзрд╛рд░рд╛рдПрдВ</li>
                            <li>рдЖрдкрдХреЗ рдЕрдзрд┐рдХрд╛рд░ рдФрд░ рдХрд╛рдиреВрдиреА рдЙрдкрд╛рдп</li>
                            <li>рд╕рд░рдХрд╛рд░реА рдпреЛрдЬрдирд╛рдУрдВ рдФрд░ рдкреЛрд░реНрдЯрд▓ рдХреА рдЬрд╛рдирдХрд╛рд░реА</li>
                        </ul>
                        <p><strong>рдЕрдкрдирд╛ рд╕рд╡рд╛рд▓ рдЯрд╛рдЗрдк рдХрд░реЗрдВ рдпрд╛ рдиреАрдЪреЗ рд╕реЗ рдЪреБрдиреЗрдВ:</strong></p>
                    </div>
                </div>
            </div>

            <div class="typing-indicator" id="typing-indicator">
                <div class="typing-dots">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
                <span id="typing-text">рдиреНрдпрд╛рдп рдорд┐рддреНрд░ рдЯрд╛рдЗрдк рдХрд░ рд░рд╣рд╛ рд╣реИ...</span>
            </div>

            <div class="chat-input-area">
                <div class="suggestions" id="suggestions">
                    <!-- Suggestions will be added dynamically -->
                </div>
                <div class="chat-input-container">
                    <textarea 
                        id="chat-input" 
                        class="chat-input" 
                        placeholder="рдЕрдкрдирд╛ рдХрд╛рдиреВрдиреА рд╕рд╡рд╛рд▓ рдпрд╣рд╛рдБ рд▓рд┐рдЦреЗрдВ..."
                        rows="1"></textarea>
                    <button id="voice-btn" class="voice-btn" title="рдЕрдкрдиреА рд╕рдорд╕реНрдпрд╛ рдмреЛрд▓реЗрдВ">ЁЯОд</button>
                    <button id="send-btn" class="send-btn" title="рднреЗрдЬреЗрдВ">ЁЯУд</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentLanguage = 'hindi';
        let chatHistory = [];
        let recognition = null;
        let isListening = false;

        // Speech recognition language codes
        const speechLanguages = {
            hindi: 'hi-IN',
            english: 'en-US',
            kannada: 'kn-IN',
            tamil: 'ta-IN',
            telugu: 'te-IN'
        };

        const translations = {
            hindi: {
                chatTitle: 'ЁЯТм рдЕрдкрдиреА рдХрд╛рдиреВрдиреА рд╕рдорд╕реНрдпрд╛ рдмрддрд╛рдПрдВ',
                chatSubtitle: 'рдореИрдВ рдЖрдкрдХреА рдорджрдж рдХреЗ рд▓рд┐рдП рдпрд╣рд╛рдБ рд╣реВрдБ - рд╕рднреА рднрд╛рд░рддреАрдп рдХрд╛рдиреВрди, рдЕрдзрд┐рдирд┐рдпрдо рдФрд░ рд╕рдВрд╡рд┐рдзрд╛рди рдХреА рдЬрд╛рдирдХрд╛рд░реА',
                placeholder: 'рдЕрдкрдирд╛ рдХрд╛рдиреВрдиреА рд╕рд╡рд╛рд▓ рдпрд╣рд╛рдБ рд▓рд┐рдЦреЗрдВ...',
                typing: 'рдиреНрдпрд╛рдп рдорд┐рддреНрд░ рдЯрд╛рдЗрдк рдХрд░ рд░рд╣рд╛ рд╣реИ...',
                voiceBtn: 'рдЕрдкрдиреА рд╕рдорд╕реНрдпрд╛ рдмреЛрд▓реЗрдВ',
                sendBtn: 'рднреЗрдЬреЗрдВ',
                listening: 'рд╕реБрди рд░рд╣рд╛ рд╣реВрдБ... рдмреЛрд▓реЗрдВ',
                voiceError: 'рдорд╛рдЗрдХреНрд░реЛрдлрд╝реЛрди рдПрдХреНрд╕реЗрд╕ рдирд╣реАрдВ рдорд┐рд▓рд╛',
                welcomeTitle: '<strong>рдирдорд╕реНрддреЗ! рдореИрдВ рдЖрдкрдХрд╛ рдиреНрдпрд╛рдп рдорд┐рддреНрд░ рд╣реВрдБред</strong> ЁЯСЛ',
                welcomeText: 'рдореИрдВ рдЖрдкрдХреЛ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдореЗрдВ рдорджрдж рдХрд░ рд╕рдХрддрд╛ рд╣реВрдБ:',
                welcomePoints: [
                    'рднрд╛рд░рддреАрдп рдХрд╛рдиреВрди рдФрд░ рдЕрдзрд┐рдирд┐рдпрдо рдХреА рдЬрд╛рдирдХрд╛рд░реА',
                    'IPC, CrPC, рднрд╛рд░рддреАрдп рд╕рдВрд╡рд┐рдзрд╛рди рдХреА рдзрд╛рд░рд╛рдПрдВ',
                    'рдЖрдкрдХреЗ рдЕрдзрд┐рдХрд╛рд░ рдФрд░ рдХрд╛рдиреВрдиреА рдЙрдкрд╛рдп',
                    'рд╕рд░рдХрд╛рд░реА рдпреЛрдЬрдирд╛рдУрдВ рдФрд░ рдкреЛрд░реНрдЯрд▓ рдХреА рдЬрд╛рдирдХрд╛рд░реА'
                ],
                welcomePrompt: '<strong>рдЕрдкрдирд╛ рд╕рд╡рд╛рд▓ рдЯрд╛рдЗрдк рдХрд░реЗрдВ рдпрд╛ рдиреАрдЪреЗ рд╕реЗ рдЪреБрдиреЗрдВ:</strong>',
                suggestions: [
                    'рд╡реЗрддрди рдирд╣реАрдВ рдорд┐рд▓ рд░рд╣рд╛ рд╣реИ',
                    'рдЬрдореАрди рдХрд╛ рд╡рд┐рд╡рд╛рдж рд╣реИ',
                    'рдкреБрд▓рд┐рд╕ рд╢рд┐рдХрд╛рдпрдд рдХреИрд╕реЗ рдХрд░реЗрдВ',
                    'рд░рд╛рд╢рди рдХрд╛рд░реНрдб рдХреИрд╕реЗ рдмрдирд╛рдПрдВ',
                    'рдореБрдлреНрдд рд╡рдХреАрд▓ рдХреИрд╕реЗ рдорд┐рд▓реЗрдЧрд╛'
                ]
            },
            english: {
                chatTitle: 'ЁЯТм Tell Us Your Legal Problem',
                chatSubtitle: 'I\'m here to help - All Indian laws, acts and constitutional information',
                placeholder: 'Type your legal question here...',
                typing: 'Nyaya Mitra is typing...',
                voiceBtn: 'Speak your problem',
                sendBtn: 'Send',
                listening: 'Listening... Please speak',
                voiceError: 'Microphone access denied',
                welcomeTitle: '<strong>Hello! I am your Nyaya Mitra.</strong> ЁЯСЛ',
                welcomeText: 'I can help you with:',
                welcomePoints: [
                    'Indian laws and acts information',
                    'IPC, CrPC, Indian Constitution sections',
                    'Your rights and legal remedies',
                    'Government schemes and portal information'
                ],
                welcomePrompt: '<strong>Type your question or choose from below:</strong>',
                suggestions: [
                    'Salary not paid',
                    'Land dispute issue',
                    'How to file police complaint',
                    'How to get ration card',
                    'How to get free lawyer'
                ]
            },
            kannada: {
                chatTitle: 'ЁЯТм р▓ир▓┐р▓ор│Нр▓о р▓Хр▓╛р▓ир│Вр▓ир│Б р▓╕р▓ор▓╕р│Нр▓пр│Жр▓пр▓ир│Нр▓ир│Б р▓╣р│Зр▓│р▓┐',
                chatSubtitle: 'р▓ир▓╛р▓ир│Б р▓ир▓┐р▓ор▓Чр│Ж р▓╕р▓╣р▓╛р▓п р▓ор▓╛р▓бр▓▓р│Б р▓Зр▓▓р│Нр▓▓р▓┐р▓жр│Нр▓жр│Зр▓ир│Ж - р▓Ор▓▓р│Нр▓▓р▓╛ р▓нр▓╛р▓░р▓др│Ар▓п р▓Хр▓╛р▓ир│Вр▓ир│Бр▓Чр▓│р│Б, р▓Хр▓╛р▓пр│Нр▓жр│Жр▓Чр▓│р│Б р▓ор▓др│Нр▓др│Б р▓╕р▓Вр▓╡р▓┐р▓зр▓╛р▓и р▓ор▓╛р▓╣р▓┐р▓др▓┐',
                placeholder: 'р▓ир▓┐р▓ор│Нр▓о р▓Хр▓╛р▓ир│Вр▓ир│Б р▓кр│Нр▓░р▓╢р│Нр▓ир│Жр▓пр▓ир│Нр▓ир│Б р▓Зр▓▓р│Нр▓▓р▓┐ р▓Яр│Ир▓кр│Н р▓ор▓╛р▓бр▓┐...',
                typing: 'р▓ир│Нр▓пр▓╛р▓п р▓ор▓┐р▓др│Нр▓░ р▓Яр│Ир▓кр│Н р▓ор▓╛р▓бр│Бр▓др│Нр▓др▓┐р▓жр│Ж...',
                voiceBtn: 'р▓ир▓┐р▓ор│Нр▓о р▓╕р▓ор▓╕р│Нр▓пр│Жр▓пр▓ир│Нр▓ир│Б р▓╣р│Зр▓│р▓┐',
                sendBtn: 'р▓Хр▓│р│Бр▓╣р▓┐р▓╕р▓┐',
                listening: 'р▓Жр▓▓р▓┐р▓╕р│Бр▓др│Нр▓др▓┐р▓жр│Ж... р▓жр▓пр▓╡р▓┐р▓Яр│Нр▓Яр│Б р▓ор▓╛р▓др▓ир▓╛р▓бр▓┐',
                voiceError: 'р▓ор│Ир▓Хр│Нр▓░р│Кр▓лр│Лр▓ир│Н р▓кр│Нр▓░р▓╡р│Зр▓╢ р▓ир▓┐р▓░р▓╛р▓Хр▓░р▓┐р▓╕р▓▓р▓╛р▓Чр▓┐р▓жр│Ж',
                welcomeTitle: '<strong>р▓ир▓ор▓╕р│Нр▓Хр▓╛р▓░! р▓ир▓╛р▓ир│Б р▓ир▓┐р▓ор│Нр▓о р▓ир│Нр▓пр▓╛р▓п р▓ор▓┐р▓др│Нр▓░.</strong> ЁЯСЛ',
                welcomeText: 'р▓ир▓╛р▓ир│Б р▓ир▓┐р▓ор▓Чр│Ж р▓И р▓╡р▓┐р▓╖р▓пр▓Чр▓│р▓▓р│Нр▓▓р▓┐ р▓╕р▓╣р▓╛р▓п р▓ор▓╛р▓бр▓мр▓▓р│Нр▓▓р│Ж:',
                welcomePoints: [
                    'р▓нр▓╛р▓░р▓др│Ар▓п р▓Хр▓╛р▓ир│Вр▓ир│Бр▓Чр▓│р│Б р▓ор▓др│Нр▓др│Б р▓Хр▓╛р▓пр│Нр▓жр│Жр▓Чр▓│ р▓ор▓╛р▓╣р▓┐р▓др▓┐',
                    'IPC, CrPC, р▓нр▓╛р▓░р▓др│Ар▓п р▓╕р▓Вр▓╡р▓┐р▓зр▓╛р▓ир▓ж р▓╡р▓┐р▓нр▓╛р▓Чр▓Чр▓│р│Б',
                    'р▓ир▓┐р▓ор│Нр▓о р▓╣р▓Хр│Нр▓Хр│Бр▓Чр▓│р│Б р▓ор▓др│Нр▓др│Б р▓Хр▓╛р▓ир│Вр▓ир│Б р▓кр▓░р▓┐р▓╣р▓╛р▓░р▓Чр▓│р│Б',
                    'р▓╕р▓░р│Нр▓Хр▓╛р▓░р▓┐ р▓пр│Лр▓Ьр▓ир│Жр▓Чр▓│р│Б р▓ор▓др│Нр▓др│Б р▓кр│Лр▓░р│Нр▓Яр▓▓р│Н р▓ор▓╛р▓╣р▓┐р▓др▓┐'
                ],
                welcomePrompt: '<strong>р▓ир▓┐р▓ор│Нр▓о р▓кр│Нр▓░р▓╢р│Нр▓ир│Жр▓пр▓ир│Нр▓ир│Б р▓Яр│Ир▓кр│Н р▓ор▓╛р▓бр▓┐ р▓Ер▓ер▓╡р▓╛ р▓Хр│Жр▓│р▓Чр▓┐р▓ир▓┐р▓Вр▓ж р▓Жр▓пр│Нр▓Хр│Ж р▓ор▓╛р▓бр▓┐:</strong>',
                suggestions: [
                    'р▓╕р▓Вр▓мр▓│ р▓╕р▓┐р▓Чр│Бр▓др│Нр▓др▓┐р▓▓р│Нр▓▓',
                    'р▓нр│В р▓╡р▓┐р▓╡р▓╛р▓ж р▓╕р▓ор▓╕р│Нр▓пр│Ж',
                    'р▓кр│Кр▓▓р│Ар▓╕р│Н р▓жр│Вр▓░р│Б р▓╣р│Зр▓Чр│Ж р▓╕р▓▓р│Нр▓▓р▓┐р▓╕р│Бр▓╡р│Бр▓жр│Б',
                    'р▓кр▓бр▓┐р▓др▓░ р▓Хр▓╛р▓░р│Нр▓бр│Н р▓╣р│Зр▓Чр│Ж р▓кр▓бр│Жр▓пр│Бр▓╡р│Бр▓жр│Б',
                    'р▓Йр▓Ър▓┐р▓д р▓╡р▓Хр│Ар▓▓ р▓╣р│Зр▓Чр│Ж р▓╕р▓┐р▓Чр│Бр▓др│Нр▓др▓жр│Ж'
                ]
            },
            tamil: {
                chatTitle: 'ЁЯТм роЙроЩрпНроХро│рпН роЪроЯрпНроЯ рокро┐ро░роЪрпНроЪройрпИропрпИроЪрпН роЪрпКро▓рпНро▓рпБроЩрпНроХро│рпН',
                chatSubtitle: 'роиро╛ройрпН роЙроЩрпНроХро│рпБроХрпНроХрпБ роЙродро╡ роЗроЩрпНроХрпЗ роЗро░рпБроХрпНроХро┐ро▒рпЗройрпН - роЕройрпИродрпНродрпБ роЗроирпНродро┐роп роЪроЯрпНроЯроЩрпНроХро│рпН, роЪроЯрпНроЯроЩрпНроХро│рпН рооро▒рпНро▒рпБроорпН роЕро░роЪро┐ропро▓роорпИрокрпНрокрпБ родроХро╡ро▓рпН',
                placeholder: 'роЙроЩрпНроХро│рпН роЪроЯрпНроЯ роХрпЗро│рпНро╡ро┐ропрпИ роЗроЩрпНроХрпЗ родроЯрпНроЯроЪрпНроЪрпБ роЪрпЖропрпНропро╡рпБроорпН...',
                typing: 'роиро┐ропро╛роп рооро┐родрпНро░ро╛ родроЯрпНроЯроЪрпНроЪрпБ роЪрпЖропрпНроХро┐ро▒ро╛ро░рпН...',
                voiceBtn: 'роЙроЩрпНроХро│рпН рокро┐ро░роЪрпНроЪройрпИропрпИроЪрпН роЪрпКро▓рпНро▓рпБроЩрпНроХро│рпН',
                sendBtn: 'роЕройрпБрокрпНрокрпБ',
                listening: 'роХрпЗроЯрпНроХро┐ро▒рпЗройрпН... родропро╡рпБроЪрпЖропрпНродрпБ рокрпЗроЪрпБроЩрпНроХро│рпН',
                voiceError: 'роорпИроХрпНро░рпЛроГрокрпЛройрпН роЕрогрпБроХро▓рпН рооро▒рпБроХрпНроХрокрпНрокроЯрпНроЯродрпБ',
                welcomeTitle: '<strong>ро╡рогроХрпНроХроорпН! роиро╛ройрпН роЙроЩрпНроХро│рпН роиро┐ропро╛роп рооро┐родрпНро░ро╛.</strong> ЁЯСЛ',
                welcomeText: 'роиро╛ройрпН роЙроЩрпНроХро│рпБроХрпНроХрпБ роЗро╡ро▒рпНро▒ро┐ро▓рпН роЙродро╡ роорпБроЯро┐ропрпБроорпН:',
                welcomePoints: [
                    'роЗроирпНродро┐роп роЪроЯрпНроЯроЩрпНроХро│рпН рооро▒рпНро▒рпБроорпН роЪроЯрпНроЯроЩрпНроХро│рпН родроХро╡ро▓рпН',
                    'IPC, CrPC, роЗроирпНродро┐роп роЕро░роЪро┐ропро▓роорпИрокрпНрокрпБ рокро┐ро░ро┐ро╡рпБроХро│рпН',
                    'роЙроЩрпНроХро│рпН роЙро░ро┐роорпИроХро│рпН рооро▒рпНро▒рпБроорпН роЪроЯрпНроЯ родрпАро░рпНро╡рпБроХро│рпН',
                    'роЕро░роЪрпБ родро┐роЯрпНроЯроЩрпНроХро│рпН рооро▒рпНро▒рпБроорпН рокрпЛро░рпНроЯро▓рпН родроХро╡ро▓рпН'
                ],
                welcomePrompt: '<strong>роЙроЩрпНроХро│рпН роХрпЗро│рпНро╡ро┐ропрпИ родроЯрпНроЯроЪрпНроЪрпБ роЪрпЖропрпНропро╡рпБроорпН роЕро▓рпНро▓родрпБ роХрпАро┤рпЗ роЗро░рпБроирпНродрпБ родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН:</strong>',
                suggestions: [
                    'роЪроорпНрокро│роорпН роХро┐роЯрпИроХрпНроХро╡ро┐ро▓рпНро▓рпИ',
                    'роиро┐ро▓ родроХро░ро╛ро▒рпБ рокро┐ро░роЪрпНроЪро┐ройрпИ',
                    'рокрпЛро▓рпАро╕рпН рокрпБроХро╛ро░рпН роОрокрпНрокроЯро┐ рокродро┐ро╡рпБ роЪрпЖропрпНро╡родрпБ',
                    'ро░рпЗро╖ройрпН роЕроЯрпНроЯрпИ роОрокрпНрокроЯро┐ рокрпЖро▒рпБро╡родрпБ',
                    'роЗро▓ро╡роЪ ро╡ро┤роХрпНроХро▒ро┐роЮро░рпН роОрокрпНрокроЯро┐ роХро┐роЯрпИрокрпНрокро╛ро░рпН'
                ]
            },
            telugu: {
                chatTitle: 'ЁЯТм р░ор▒А р░Ър░Яр▒Нр░Яр░кр░░р░ор▒Ир░и р░╕р░ор░╕р▒Нр░пр░ир▒Б р░Ър▒Жр░кр▒Нр░кр░Вр░бр░┐',
                chatSubtitle: 'р░ир▒Зр░ир▒Б р░ор▒Ар░Хр▒Б р░╕р░╣р░╛р░пр░В р░Ър▒Зр░пр░бр░╛р░ир░┐р░Хр░┐ р░Зр░Хр▒Нр░Хр░б р░Йр░ир▒Нр░ир░╛р░ир▒Б - р░Ер░ир▒Нр░ир░┐ р░нр░╛р░░р░др▒Ар░п р░Ър░Яр▒Нр░Яр░╛р░▓р▒Б, р░Ър░Яр▒Нр░Яр░╛р░▓р▒Б р░ор░░р░┐р░пр▒Б р░░р░╛р░Ьр▒Нр░пр░╛р░Вр░Ч р░╕р░ор░╛р░Ър░╛р░░р░В',
                placeholder: 'р░ор▒А р░Ър░Яр▒Нр░Яр░кр░░р░ор▒Ир░и р░кр▒Нр░░р░╢р▒Нр░ир░ир▒Б р░Зр░Хр▒Нр░Хр░б р░Яр▒Ир░кр▒Н р░Ър▒Жр░пр▒Нр░пр░Вр░бр░┐...',
                typing: 'р░ир▒Нр░пр░╛р░п р░ор░┐р░др▒Нр░░ р░Яр▒Ир░кр▒Н р░Ър▒Зр░╕р▒Нр░др▒Лр░Вр░жр░┐...',
                voiceBtn: 'р░ор▒А р░╕р░ор░╕р▒Нр░пр░ир▒Б р░Ър▒Жр░кр▒Нр░кр░Вр░бр░┐',
                sendBtn: 'р░кр░Вр░кр░Вр░бр░┐',
                listening: 'р░╡р░┐р░Вр░Яр▒Бр░ир▒Нр░ир░╛р░ир▒Б... р░жр░пр░Ър▒Зр░╕р░┐ р░ор░╛р░Яр▒Нр░▓р░╛р░бр░Вр░бр░┐',
                voiceError: 'р░ор▒Ир░Хр▒Нр░░р▒Лр░лр▒Лр░ир▒Н р░пр░╛р░Хр▒Нр░╕р▒Жр░╕р▒Н р░ир░┐р░░р░╛р░Хр░░р░┐р░Вр░Ър░мр░бр░┐р░Вр░жр░┐',
                welcomeTitle: '<strong>р░ир░ор░╕р▒Нр░Хр░╛р░░р░В! р░ир▒Зр░ир▒Б р░ор▒А р░ир▒Нр░пр░╛р░п р░ор░┐р░др▒Нр░░.</strong> ЁЯСЛ',
                welcomeText: 'р░ир▒Зр░ир▒Б р░ор▒Ар░Хр▒Б р░И р░╡р░┐р░╖р░пр░╛р░▓р░▓р▒Л р░╕р░╣р░╛р░пр░В р░Ър▒Зр░пр░Чр░▓р░ир▒Б:',
                welcomePoints: [
                    'р░нр░╛р░░р░др▒Ар░п р░Ър░Яр▒Нр░Яр░╛р░▓р▒Б р░ор░░р░┐р░пр▒Б р░Ър░Яр▒Нр░Яр░╛р░▓ р░╕р░ор░╛р░Ър░╛р░░р░В',
                    'IPC, CrPC, р░нр░╛р░░р░д р░░р░╛р░Ьр▒Нр░пр░╛р░Вр░Ч р░╡р░┐р░нр░╛р░Чр░╛р░▓р▒Б',
                    'р░ор▒А р░╣р░Хр▒Нр░Хр▒Бр░▓р▒Б р░ор░░р░┐р░пр▒Б р░Ър░Яр▒Нр░Яр░кр░░р░ор▒Ир░и р░кр░░р░┐р░╖р▒Нр░Хр░╛р░░р░╛р░▓р▒Б',
                    'р░кр▒Нр░░р░нр▒Бр░др▒Нр░╡ р░кр░ер░Хр░╛р░▓р▒Б р░ор░░р░┐р░пр▒Б р░кр▒Лр░░р▒Нр░Яр░▓р▒Н р░╕р░ор░╛р░Ър░╛р░░р░В'
                ],
                welcomePrompt: '<strong>р░ор▒А р░кр▒Нр░░р░╢р▒Нр░ир░ир▒Б р░Яр▒Ир░кр▒Н р░Ър▒Зр░пр░Вр░бр░┐ р░▓р▒Зр░жр░╛ р░Хр▒Нр░░р░┐р░Вр░жр░┐ р░ир▒Бр░Вр░бр░┐ р░Ор░Вр░Ър▒Бр░Хр▒Лр░Вр░бр░┐:</strong>',
                suggestions: [
                    'р░Ьр▒Ар░др░В р░░р░╛р░╡р░бр░В р░▓р▒Зр░жр▒Б',
                    'р░нр▒Вр░ор░┐ р░╡р░┐р░╡р░╛р░жр░В р░╕р░ор░╕р▒Нр░п',
                    'р░кр▒Лр░▓р▒Ар░╕р▒Б р░лр░┐р░░р▒Нр░пр░╛р░жр▒Б р░Ор░▓р░╛ р░Ър▒Зр░пр░╛р░▓р░┐',
                    'р░░р▒Зр░╖р░ир▒Н р░Хр░╛р░░р▒Нр░бр▒Б р░Ор░▓р░╛ р░кр▒Кр░Вр░жр░╛р░▓р░┐',
                    'р░Йр░Ър░┐р░д р░ир▒Нр░пр░╛р░пр░╡р░╛р░жр░┐ р░Ор░▓р░╛ р░жр▒Кр░░р▒Бр░Хр▒Бр░др░╛р░░р▒Б'
                ]
            }
        };

        // Initialize
        function init() {
            updateUILanguage();
            loadSuggestions();
            
            // Event listeners
            document.getElementById('send-btn').addEventListener('click', sendMessage);
            document.getElementById('chat-input').addEventListener('keypress', (e) => {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendMessage();
                }
            });

            // Language buttons
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    currentLanguage = btn.dataset.lang;
                    document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    updateUILanguage();
                    loadSuggestions();
                });
            });

            // Auto-resize textarea
            const textarea = document.getElementById('chat-input');
            textarea.addEventListener('input', () => {
                textarea.style.height = 'auto';
                textarea.style.height = Math.min(textarea.scrollHeight, 120) + 'px';
            });

            // Voice button
            document.getElementById('voice-btn').addEventListener('click', toggleVoiceInput);

            // Initialize speech recognition
            initSpeechRecognition();
        }

        function initSpeechRecognition() {
            if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                recognition = new SpeechRecognition();
                recognition.continuous = false;
                recognition.interimResults = false;

                recognition.onstart = () => {
                    isListening = true;
                    const voiceBtn = document.getElementById('voice-btn');
                    voiceBtn.classList.add('listening');
                    const t = translations[currentLanguage];
                    document.getElementById('chat-input').placeholder = t.listening;
                };

                recognition.onresult = (event) => {
                    const transcript = event.results[0][0].transcript;
                    document.getElementById('chat-input').value = transcript;
                    // Auto-send the voice message
                    setTimeout(() => sendMessage(), 500);
                };

                recognition.onerror = (event) => {
                    console.error('Speech recognition error:', event.error);
                    isListening = false;
                    const voiceBtn = document.getElementById('voice-btn');
                    voiceBtn.classList.remove('listening');
                    const t = translations[currentLanguage];
                    document.getElementById('chat-input').placeholder = t.placeholder;
                    if (event.error === 'not-allowed') {
                        alert(t.voiceError);
                    }
                };

                recognition.onend = () => {
                    isListening = false;
                    const voiceBtn = document.getElementById('voice-btn');
                    voiceBtn.classList.remove('listening');
                    const t = translations[currentLanguage];
                    document.getElementById('chat-input').placeholder = t.placeholder;
                };
            }
        }

        function toggleVoiceInput() {
            if (!recognition) {
                const t = translations[currentLanguage];
                alert(t.voiceError || 'Voice input not supported in your browser');
                return;
            }

            if (isListening) {
                recognition.stop();
            } else {
                // Set language based on current selection
                recognition.lang = speechLanguages[currentLanguage];
                try {
                    recognition.start();
                } catch (error) {
                    console.error('Error starting recognition:', error);
                }
            }
        }

        function updateUILanguage() {
            const t = translations[currentLanguage];
            document.getElementById('chat-title').textContent = t.chatTitle;
            document.getElementById('chat-subtitle').textContent = t.chatSubtitle;
            document.getElementById('chat-input').placeholder = t.placeholder;
            document.getElementById('typing-text').textContent = t.typing;
            
            // Update button titles
            document.getElementById('voice-btn').title = t.voiceBtn;
            document.getElementById('send-btn').title = t.sendBtn;
            
            // Update welcome message
            const welcomeMessage = document.querySelector('.message.bot .message-content');
            if (welcomeMessage) {
                let welcomeHTML = `<p>${t.welcomeTitle}</p>`;
                welcomeHTML += `<p>${t.welcomeText}</p>`;
                welcomeHTML += '<ul style="margin: 1rem 0; padding-left: 1.5rem;">';
                t.welcomePoints.forEach(point => {
                    welcomeHTML += `<li>${point}</li>`;
                });
                welcomeHTML += '</ul>';
                welcomeHTML += `<p>${t.welcomePrompt}</p>`;
                welcomeMessage.innerHTML = welcomeHTML;
            }
        }

        function loadSuggestions() {
            const suggestionsContainer = document.getElementById('suggestions');
            const t = translations[currentLanguage];
            suggestionsContainer.innerHTML = '';
            
            t.suggestions.forEach(suggestion => {
                const chip = document.createElement('button');
                chip.className = 'suggestion-chip';
                chip.textContent = suggestion;
                chip.addEventListener('click', () => {
                    document.getElementById('chat-input').value = suggestion;
                    sendMessage();
                });
                suggestionsContainer.appendChild(chip);
            });
        }

        async function sendMessage() {
            const input = document.getElementById('chat-input');
            const message = input.value.trim();
            
            if (!message) return;

            // Add user message
            addMessage(message, 'user');
            input.value = '';
            input.style.height = 'auto';

            // Show typing indicator
            document.getElementById('typing-indicator').classList.add('active');
            document.getElementById('send-btn').disabled = true;

            try {
                // Call backend API
                const response = await fetch('http://localhost:3000/api/chat-legal-advice', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        query: message,
                        language: currentLanguage,
                        chatHistory: chatHistory
                    })
                });

                const data = await response.json();
                
                // Hide typing indicator
                document.getElementById('typing-indicator').classList.remove('active');
                document.getElementById('send-btn').disabled = false;

                // Add bot response
                if (data.success) {
                    addBotResponse(data);
                    chatHistory.push({
                        role: 'user',
                        content: message
                    }, {
                        role: 'assistant',
                        content: data.response
                    });
                } else {
                    addMessage('тЭМ рдорд╛рдл рдХрд░реЗрдВ, рдХреБрдЫ рдЧрдбрд╝рдмрдбрд╝ рд╣реЛ рдЧрдИред рдХреГрдкрдпрд╛ рдлрд┐рд░ рд╕реЗ рдХреЛрд╢рд┐рд╢ рдХрд░реЗрдВред', 'bot');
                }
            } catch (error) {
                console.error('Error:', error);
                document.getElementById('typing-indicator').classList.remove('active');
                document.getElementById('send-btn').disabled = false;
                addMessage('тЭМ рд╕рд░реНрд╡рд░ рд╕реЗ рдХрдиреЗрдХреНрдЯ рдирд╣реАрдВ рд╣реЛ рдкрд╛ рд░рд╣рд╛ред рдХреГрдкрдпрд╛ рд╕рд░реНрд╡рд░ рдЪрд╛рд▓реВ рдХрд░реЗрдВред', 'bot');
            }
        }

        function addMessage(text, type) {
            const messagesContainer = document.getElementById('chat-messages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${type}`;
            
            const avatar = document.createElement('div');
            avatar.className = 'message-avatar';
            avatar.textContent = type === 'user' ? 'ЁЯСд' : 'ЁЯдЦ';
            
            const content = document.createElement('div');
            content.className = 'message-content';
            content.innerHTML = `<p>${text}</p>`;
            
            messageDiv.appendChild(avatar);
            messageDiv.appendChild(content);
            messagesContainer.appendChild(messageDiv);
            
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function addBotResponse(data) {
            const messagesContainer = document.getElementById('chat-messages');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message bot';
            
            const avatar = document.createElement('div');
            avatar.className = 'message-avatar';
            avatar.textContent = 'ЁЯдЦ';
            
            const content = document.createElement('div');
            content.className = 'message-content';
            
            let html = `<p>${data.response}</p>`;
            
            // Add legal sections if available
            if (data.legalInfo && data.legalInfo.sections && data.legalInfo.sections.length > 0) {
                html += `<div class="legal-section">
                    <h4>тЪЦя╕П ${data.legalInfo.actName || 'Applicable Law'}</h4>
                    <ul style="margin: 0.5rem 0; padding-left: 1.5rem;">`;
                data.legalInfo.sections.forEach(section => {
                    html += `<li>${section}</li>`;
                });
                html += `</ul>`;
                if (data.legalInfo.reference) {
                    html += `<a href="${data.legalInfo.reference}" target="_blank" class="legal-link">ЁЯУД Read Full Act тЖТ</a>`;
                }
                html += `</div>`;
            }
            
            // Add portal links if available
            if (data.portalLinks && data.portalLinks.length > 0) {
                html += `<div class="legal-section">
                    <h4>ЁЯМР Useful Portals & Links</h4>
                    <ul style="margin: 0.5rem 0; padding-left: 1.5rem;">`;
                data.portalLinks.forEach(link => {
                    html += `<li><a href="${link.url}" target="_blank" class="legal-link">${link.name}</a></li>`;
                });
                html += `</ul></div>`;
            }
            
            content.innerHTML = html;
            messageDiv.appendChild(avatar);
            messageDiv.appendChild(content);
            messagesContainer.appendChild(messageDiv);
            
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        // Initialize on load
        window.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
