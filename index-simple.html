<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nyaya Mitra - ‡§®‡•ç‡§Ø‡§æ‡§Ø ‡§Æ‡§ø‡§§‡•ç‡§∞</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="manifest" href="manifest.json">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: #FFF9F5;
            color: #2E3440;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        header {
            background: white;
            padding: 1rem 2rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            text-align: center;
        }

        header h1 {
            font-size: 1.5rem;
            color: #FF8C42;
        }

        .container {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
        }

        .main-title {
            text-align: center;
            margin-bottom: 3rem;
        }

        .main-title .emoji {
            font-size: 5rem;
            margin-bottom: 1rem;
        }

        .main-title h2 {
            font-size: 2.5rem;
            color: #FF8C42;
            margin-bottom: 0.5rem;
        }

        .main-title p {
            font-size: 1.5rem;
            color: #2E3440;
            font-weight: 600;
        }

        .language-section {
            margin-bottom: 3rem;
            text-align: center;
        }

        .language-section h3 {
            font-size: 1.25rem;
            margin-bottom: 1.5rem;
            color: #2E3440;
        }

        .language-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            max-width: 800px;
            margin: 0 auto;
        }

        .lang-button {
            padding: 1.5rem;
            background: white;
            border: 2px solid #E5E7EB;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
        }

        .lang-button:hover {
            border-color: #FF8C42;
            transform: translateY(-3px);
            box-shadow: 0 4px 12px rgba(255, 140, 66, 0.2);
        }

        .lang-button.active {
            border-color: #FF8C42;
            background: #FFF4ED;
        }

        .lang-button .flag {
            font-size: 2rem;
        }

        .lang-button .text {
            font-size: 1.25rem;
            font-weight: 600;
        }

        .mic-section {
            margin: 3rem 0;
            text-align: center;
        }

        #mic-button {
            width: 200px;
            height: 200px;
            font-size: 6rem;
            border-radius: 50%;
            background: linear-gradient(135deg, #FF8C42, #ff6b35);
            color: white;
            border: none;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(255, 140, 66, 0.3);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto;
        }

        #mic-button:hover {
            transform: scale(1.1);
            box-shadow: 0 15px 40px rgba(255, 140, 66, 0.5);
        }

        #mic-button:active {
            transform: scale(0.95);
        }

        .instructions {
            margin-top: 2rem;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .instructions p {
            margin: 0.5rem 0;
        }

        .instruction-main {
            font-size: 1.5rem;
            font-weight: 700;
            color: #FF8C42;
            margin-bottom: 1rem;
        }

        .instruction-sub {
            font-size: 1.25rem;
            color: #6B7280;
            line-height: 1.6;
        }

        .examples {
            max-width: 900px;
            margin: 3rem auto 0;
        }

        .examples h2 {
            font-size: 1.75rem;
            font-weight: 700;
            text-align: center;
            margin-bottom: 2rem;
            color: #2E3440;
        }

        .example-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
        }

        .example-card {
            background: white;
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            text-align: center;
            transition: all 0.3s ease;
            border: 2px solid #E5E7EB;
        }

        .example-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(255, 140, 66, 0.2);
            border-color: #FF8C42;
        }

        .example-card .icon {
            font-size: 3rem;
            margin-bottom: 0.5rem;
        }

        .example-card .title {
            font-weight: 600;
            color: #2E3440;
            margin-bottom: 0.5rem;
        }

        .example-card .subtitle {
            font-size: 0.9rem;
            color: #6B7280;
            line-height: 1.4;
        }

        #voice-output {
            margin-top: 2rem;
            padding: 2rem;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            min-height: 100px;
            display: none;
        }

        #voice-output.active {
            display: block;
        }

        @media (max-width: 768px) {
            .main-title h2 {
                font-size: 2rem;
            }

            #mic-button {
                width: 150px;
                height: 150px;
                font-size: 4rem;
            }

            .language-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>üß° Nyaya Mitra - ‡§®‡•ç‡§Ø‡§æ‡§Ø ‡§Æ‡§ø‡§§‡•ç‡§∞</h1>
    </header>

    <div class="container">
        <div class="main-title">
            <div class="emoji">üë®‚Äç‚öñÔ∏è</div>
            <h2>‡§®‡•ç‡§Ø‡§æ‡§Ø ‡§Æ‡§ø‡§§‡•ç‡§∞</h2>
            <p>‡§Ü‡§™‡§ï‡§æ ‡§ï‡§æ‡§®‡•Ç‡§®‡•Ä ‡§¶‡•ã‡§∏‡•ç‡§§</p>
        </div>

        <div class="language-section">
            <h3>üó£Ô∏è ‡§Ö‡§™‡§®‡•Ä ‡§≠‡§æ‡§∑‡§æ ‡§ö‡•Å‡§®‡•á‡§Ç (Choose Your Language):</h3>
            <div class="language-grid">
                <button class="lang-button active" data-lang="hindi">
                    <span class="flag">üáÆüá≥</span>
                    <span class="text">‡§π‡§ø‡§Ç‡§¶‡•Ä</span>
                </button>
                <button class="lang-button" data-lang="english">
                    <span class="flag">üá¨üáß</span>
                    <span class="text">English</span>
                </button>
                <button class="lang-button" data-lang="kannada">
                    <span class="flag">üåæ</span>
                    <span class="text">‡≤ï‡≤®‡≥ç‡≤®‡≤°</span>
                </button>
                <button class="lang-button" data-lang="bhojpuri">
                    <span class="flag">üåæ</span>
                    <span class="text">‡§≠‡•ã‡§ú‡§™‡•Å‡§∞‡•Ä</span>
                </button>
                <button class="lang-button" data-lang="tamil">
                    <span class="flag">üìú</span>
                    <span class="text">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</span>
                </button>
                <button class="lang-button" data-lang="telugu">
                    <span class="flag">üìñ</span>
                    <span class="text">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å</span>
                </button>
            </div>
        </div>

        <div class="mic-section">
            <button id="mic-button">üé§</button>
            <div class="instructions" id="instructions">
                <p class="instruction-main">üëÜ ‡§¨‡§ü‡§® ‡§¶‡§¨‡§æ‡§è‡§Ç ‡§î‡§∞ ‡§¨‡•ã‡§≤‡•á‡§Ç</p>
                <p class="instruction-sub">Press the button and speak<br>‡≤ó‡≥Å‡≤Ç‡≤°‡≤ø‡≤Ø‡≤®‡≥ç‡≤®‡≥Å ‡≤í‡≤§‡≥ç‡≤§‡≤ø ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤Æ‡≤æ‡≤§‡≤®‡≤æ‡≤°‡≤ø</p>
            </div>
        </div>

        <div id="voice-output"></div>

        <div class="examples">
            <h2>üí¨ ‡§Ü‡§™ ‡§ï‡•ç‡§Ø‡§æ ‡§¨‡•ã‡§≤ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç? (What can you say?)</h2>
            <div class="example-grid">
                <div class="example-card">
                    <div class="icon">üí∞</div>
                    <div class="title">‡§µ‡•á‡§§‡§® ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ</div>
                    <div class="subtitle">Salary not paid<br>‡≤∏‡≤Ç‡≤¨‡≤≥ ‡≤∏‡≤ø‡≤ï‡≥ç‡≤ï‡≤ø‡≤≤‡≥ç‡≤≤</div>
                </div>
                <div class="example-card">
                    <div class="icon">üè°</div>
                    <div class="title">‡§ú‡§Æ‡•Ä‡§® ‡§ï‡§æ ‡§ù‡§ó‡§°‡§º‡§æ</div>
                    <div class="subtitle">Land dispute<br>‡≤≠‡≥Ç ‡≤µ‡≤ø‡≤µ‡≤æ‡≤¶</div>
                </div>
                <div class="example-card">
                    <div class="icon">üëÆ</div>
                    <div class="title">‡§™‡•Å‡§≤‡§ø‡§∏ ‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§</div>
                    <div class="subtitle">Police complaint<br>‡≤™‡≥ä‡≤≤‡≥Ä‡≤∏‡≥ç ‡≤¶‡≥Ç‡≤∞‡≥Å</div>
                </div>
                <div class="example-card">
                    <div class="icon">üçö</div>
                    <div class="title">‡§∞‡§æ‡§∂‡§® ‡§ï‡§æ‡§∞‡•ç‡§° ‡§ö‡§æ‡§π‡§ø‡§è</div>
                    <div class="subtitle">Need ration card<br>‡≤™‡≤°‡≤ø‡≤§‡≤∞ ‡≤ï‡≤æ‡≤∞‡≥ç‡≤°‡≥ç ‡≤¨‡≥á‡≤ï‡≥Å</div>
                </div>
                <div class="example-card">
                    <div class="icon">üßì</div>
                    <div class="title">‡§™‡•á‡§Ç‡§∂‡§® ‡§ö‡§æ‡§π‡§ø‡§è</div>
                    <div class="subtitle">Need pension<br>‡≤™‡≤ø‡≤Ç‡≤ö‡≤£‡≤ø ‡≤¨‡≥á‡≤ï‡≥Å</div>
                </div>
                <div class="example-card">
                    <div class="icon">üë©‚Äç‚öñÔ∏è</div>
                    <div class="title">‡§Æ‡•Å‡§´‡•ç‡§§ ‡§µ‡§ï‡•Ä‡§≤ ‡§ö‡§æ‡§π‡§ø‡§è</div>
                    <div class="subtitle">Need free lawyer<br>‡≤â‡≤ö‡≤ø‡≤§ ‡≤µ‡≤ï‡≥Ä‡≤≤ ‡≤¨‡≥á‡≤ï‡≥Å</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        console.log('üöÄ Nyaya Mitra - Simple Version Loaded');

        let currentLanguage = 'hindi';
        let recognition;

        const languageMap = {
            'hindi': 'hi-IN',
            'english': 'en-US',
            'kannada': 'kn-IN',
            'bhojpuri': 'hi-IN',
            'tamil': 'ta-IN',
            'telugu': 'te-IN'
        };

        const instructions = {
            hindi: {
                button: 'üëÜ ‡§¨‡§ü‡§® ‡§¶‡§¨‡§æ‡§è‡§Ç ‡§î‡§∞ ‡§¨‡•ã‡§≤‡•á‡§Ç',
                subtitle: '‡§Ö‡§™‡§®‡•Ä ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§¨‡§§‡§æ‡§è‡§Ç'
            },
            english: {
                button: 'üëÜ Press button and speak',
                subtitle: 'Tell us your problem'
            },
            kannada: {
                button: 'üëÜ ‡≤ó‡≥Å‡≤Ç‡≤°‡≤ø‡≤Ø‡≤®‡≥ç‡≤®‡≥Å ‡≤í‡≤§‡≥ç‡≤§‡≤ø ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤Æ‡≤æ‡≤§‡≤®‡≤æ‡≤°‡≤ø',
                subtitle: '‡≤®‡≤ø‡≤Æ‡≥ç‡≤Æ ‡≤∏‡≤Æ‡≤∏‡≥ç‡≤Ø‡≥Ü‡≤Ø‡≤®‡≥ç‡≤®‡≥Å ‡≤π‡≥á‡≤≥‡≤ø'
            },
            bhojpuri: {
                button: 'üëÜ ‡§¨‡§ü‡§® ‡§¶‡§¨‡§æ‡§à‡§Ç ‡§Ü ‡§¨‡•ã‡§≤‡•Ä‡§Ç',
                subtitle: '‡§Ö‡§™‡§®‡§æ ‡§™‡§∞‡•á‡§∂‡§æ‡§®‡•Ä ‡§¨‡§§‡§æ‡§à‡§Ç'
            },
            tamil: {
                button: 'üëÜ ‡Æ™‡Æü‡Øç‡Æü‡Æ©‡Øà ‡ÆÖ‡Æ¥‡ØÅ‡Æ§‡Øç‡Æ§‡Æø ‡Æ™‡Øá‡Æö‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç',
                subtitle: '‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æ™‡Æø‡Æ∞‡Æö‡Øç‡Æö‡Æ©‡Øà‡ÆØ‡Øà‡Æö‡Øç ‡Æö‡Øä‡Æ≤‡Øç‡Æ≤‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç'
            },
            telugu: {
                button: 'üëÜ ‡∞¨‡∞ü‡∞®‡±ç‚Äå‡∞®‡±Å ‡∞®‡±ä‡∞ï‡±ç‡∞ï‡∞ø ‡∞Æ‡∞æ‡∞ü‡±ç‡∞≤‡∞æ‡∞°‡∞Ç‡∞°‡∞ø',
                subtitle: '‡∞Æ‡±Ä ‡∞∏‡∞Æ‡∞∏‡±ç‡∞Ø‡∞®‡±Å ‡∞ö‡±Ü‡∞™‡±ç‡∞™‡∞Ç‡∞°‡∞ø'
            }
        };

        const listeningText = {
            hindi: 'üé§ ‡§∏‡•Å‡§® ‡§∞‡§π‡§æ ‡§π‡•Ç‡§Å... ‡§¨‡•ã‡§≤‡§ø‡§è...',
            english: 'üé§ Listening... Speak now...',
            kannada: 'üé§ ‡≤ï‡≥á‡≤≥‡≥Å‡≤§‡≥ç‡≤§‡≤ø‡≤¶‡≥ç‡≤¶‡≥á‡≤®‡≥Ü... ‡≤à‡≤ó ‡≤Æ‡≤æ‡≤§‡≤®‡≤æ‡≤°‡≤ø...',
            bhojpuri: 'üé§ ‡§∏‡•Å‡§® ‡§∞‡§π‡§≤ ‡§¨‡§æ‡§®‡•Ä... ‡§¨‡•ã‡§≤‡•Ä‡§Ç...',
            tamil: 'üé§ ‡Æï‡Øá‡Æü‡Øç‡Æï‡Æø‡Æ±‡Øá‡Æ©‡Øç... ‡Æ™‡Øá‡Æö‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç...',
            telugu: 'üé§ ‡∞µ‡∞ø‡∞Ç‡∞ü‡±Å‡∞®‡±ç‡∞®‡∞æ‡∞®‡±Å... ‡∞Æ‡∞æ‡∞ü‡±ç‡∞≤‡∞æ‡∞°‡∞Ç‡∞°‡∞ø...'
        };

        // Language buttons
        const langButtons = document.querySelectorAll('.lang-button');
        langButtons.forEach(button => {
            button.addEventListener('click', () => {
                currentLanguage = button.dataset.lang;
                
                // Update active state
                langButtons.forEach(btn => btn.classList.remove('active'));
                button.classList.add('active');
                
                // Update instructions
                const text = instructions[currentLanguage];
                document.getElementById('instructions').innerHTML = `
                    <p class="instruction-main">${text.button}</p>
                    <p class="instruction-sub">${text.subtitle}</p>
                `;
                
                // Update recognition language
                if (recognition) {
                    recognition.lang = languageMap[currentLanguage];
                    console.log(`‚úÖ Language: ${currentLanguage}, Recognition: ${recognition.lang}`);
                }
            });
        });

        // Speech Recognition
        if ('SpeechRecognition' in window || 'webkitSpeechRecognition' in window) {
            recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
            recognition.lang = languageMap[currentLanguage];
            recognition.continuous = true;
            recognition.interimResults = true;

            recognition.onstart = () => {
                console.log('üé§ Started listening');
                const voiceOutput = document.getElementById('voice-output');
                voiceOutput.classList.add('active');
                voiceOutput.innerHTML = `<p style="font-size: 1.5rem; color: #FF8C42;">${listeningText[currentLanguage]}</p>`;
            };

            recognition.onresult = (event) => {
                let finalTranscript = '';
                let interimTranscript = '';

                for (let i = event.resultIndex; i < event.results.length; i++) {
                    const transcript = event.results[i][0].transcript;
                    if (event.results[i].isFinal) {
                        finalTranscript += transcript;
                    } else {
                        interimTranscript += transcript;
                    }
                }

                const voiceOutput = document.getElementById('voice-output');

                if (interimTranscript) {
                    voiceOutput.innerHTML = `
                        <p style="color: #6B7280; font-style: italic;">‡§∏‡•Å‡§® ‡§∞‡§π‡§æ ‡§π‡•Ç‡§Å...</p>
                        <p style="font-size: 1.5rem; color: #FF8C42; margin-top: 1rem;">"${interimTranscript}"</p>
                    `;
                }

                if (finalTranscript) {
                    recognition.stop();
                    console.log('‚úÖ Final:', finalTranscript);
                    voiceOutput.innerHTML = `
                        <div style="padding: 2rem; background: white; border-radius: 12px;">
                            <h3 style="color: #FF8C42; margin-bottom: 1rem;">üìù ‡§Ü‡§™‡§®‡•á ‡§ï‡§π‡§æ (You said):</h3>
                            <p style="font-size: 1.5rem; font-weight: 600; line-height: 1.6; color: #2E3440;">"${finalTranscript}"</p>
                            <p style="margin-top: 2rem; color: #10B981;">‚úÖ Speech recognized successfully!</p>
                            <button onclick="location.reload()" style="margin-top: 1rem; padding: 0.75rem 1.5rem; background: #FF8C42; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 1rem;">üîÑ Try Again</button>
                        </div>
                    `;
                }
            };

            recognition.onerror = (event) => {
                console.error('‚ùå Error:', event.error);
                const voiceOutput = document.getElementById('voice-output');
                voiceOutput.classList.add('active');
                voiceOutput.innerHTML = `
                    <div style="padding: 2rem; background: #FEE2E2; border-radius: 12px;">
                        <p style="color: #DC2626; font-weight: 600;">‚ùå Error: ${event.error}</p>
                        <p style="color: #991B1B; margin-top: 0.5rem;">
                            ${event.error === 'no-speech' ? '‡§ï‡•ã‡§à ‡§Ü‡§µ‡§æ‡§ú‡§º ‡§®‡§π‡•Ä‡§Ç ‡§∏‡•Å‡§®‡§æ‡§à ‡§¶‡•Ä‡•§ ‡§´‡§ø‡§∞ ‡§∏‡•á ‡§ï‡•ã‡§∂‡§ø‡§∂ ‡§ï‡§∞‡•á‡§Ç‡•§' : 
                              event.error === 'not-allowed' ? 'Microphone permission denied. Please allow microphone access.' :
                              '‡§ï‡•Å‡§õ ‡§ó‡§≤‡§§‡•Ä ‡§π‡•Å‡§à‡•§ ‡§´‡§ø‡§∞ ‡§∏‡•á ‡§ï‡•ã‡§∂‡§ø‡§∂ ‡§ï‡§∞‡•á‡§Ç‡•§'}
                        </p>
                        <button onclick="location.reload()" style="margin-top: 1rem; padding: 0.75rem 1.5rem; background: #DC2626; color: white; border: none; border-radius: 8px; cursor: pointer;">üîÑ Retry</button>
                    </div>
                `;
            };

            recognition.onend = () => {
                console.log('üõë Stopped listening');
            };

            // Microphone button
            document.getElementById('mic-button').addEventListener('click', () => {
                console.log('üé§ Mic button clicked');
                try {
                    recognition.start();
                } catch (error) {
                    console.error('Error starting recognition:', error);
                    alert('Error: ' + error.message);
                }
            });

            console.log('‚úÖ Speech Recognition ready');
        } else {
            console.error('‚ùå Speech Recognition not supported');
            document.getElementById('mic-button').disabled = true;
            document.getElementById('mic-button').style.opacity = '0.5';
            document.getElementById('instructions').innerHTML = '<p style="color: #DC2626;">Speech Recognition not supported in this browser. Please use Chrome, Edge, or Safari.</p>';
        }
    </script>
</body>
</html>
